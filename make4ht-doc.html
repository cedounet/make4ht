<!DOCTYPE html>
<html lang='en'>
<head>
<meta content='HTML Tidy for HTML5 for Linux version 5.6.0' name='generator' />
<title>The make4ht build system</title>
<meta charset='utf-8' />
<meta content='TeX4ht (http://www.tug.org/tex4ht/)' name='generator' />
<meta content='width=device-width,initial-scale=1' name='viewport' />
<link rel='stylesheet' href='make4ht-doc.css' type='text/css' />
<meta content='make4ht-doc.tex' name='src' />
<script src='https://hypothes.is/embed.js'></script>
<meta property='og:title' content='The make4ht build system' />
<meta property='og:author' content='Michal Hoftich' />
<meta property='og:type' content='website' />
<meta property='og:url' content='https://www.kodymirus.cz/make4ht/make4ht-doc.html' />
<link href='https://www.kodymirus.cz/make4ht/make4ht-doc.html' rel='canonical' />
<link href='https://www.kodymirus.cz/reyman/css/scale.css' rel='stylesheet' />
</head>
<body>
<!-- l. 26 -->
<p class='noindent'></p>
<!-- l. 26 -->
<p class='indent'></p>
<div class='center'><!-- l. 26 -->
<p class='noindent'></p>
<!-- l. 26 -->
<p class='noindent'><span class='rm-lmr-17'>The </span><span class='rm-lmtt-12x-x-144'>make4ht </span><span class='rm-lmr-17'>build system</span></p>
<div class='tabular'>
<table id='TBL-1' class='tabular'>
<colgroup id='TBL-1-1g'>
<col id='TBL-1-1' /></colgroup>
<tr id='TBL-1-1-' style='vertical-align:baseline;'>
<td class='td11' id='TBL-1-1-1' style='white-space:nowrap; text-align:center;'><span class='rm-lmr-12'>Michal Hoftich </span><span class='rm-lmr-12'>&lt;</span><a href='michal.h21@gmail.com'><span class='rm-lmr-12'>michal.h21@gmail.com</span></a><span class='rm-lmr-12'>&gt;</span></td>
</tr>
</table>
</div>
<!-- l. 26 -->
<p class='noindent'><span class='rm-lmr-12'>Version undefined</span><br />
<span class='rm-lmr-12'>undefined</span></p>
</div>
<h3 class='likesectionHead'><a id='x1-1000'></a>Contents</h3>
<div class='tableofcontents'><span class='sectionToc'>1 <a id='QQ2-1-2' href='#x1-20001'>Introduction</a></span><br />
<span class='sectionToc'>2 <a id='QQ2-1-3' href='#x1-30002'>Command line options</a></span><br />
<span class='sectionToc'>3 <a id='QQ2-1-4' href='#x1-40003'>Why <span class='rm-lmtt-10'>make4ht</span>? – <span class='rm-lmtt-10'>htlatex</span> issues</a></span><br />
 <span class='subsectionToc'>3.1 <a id='QQ2-1-5' href='#x1-50003.1'>Passing command line arguments</a></span><br />
 <span class='subsectionToc'>3.2 <a id='QQ2-1-6' href='#x1-60003.2'>Compilation sequence</a></span><br />
 <span class='subsectionToc'>3.3 <a id='QQ2-1-7' href='#x1-70003.3'>Handling of the generated files</a></span><br />
 <span class='subsectionToc'>3.4 <a id='QQ2-1-8' href='#x1-80003.4'>Image conversion and post-processing of the generated files</a></span><br />
<span class='sectionToc'>4 <a id='QQ2-1-9' href='#x1-90004'>Output file formats and extensions</a></span><br />
 <span class='subsectionToc'>4.1 <a id='QQ2-1-10' href='#x1-100004.1'>Extensions</a></span><br />
<span class='sectionToc'>5 <a id='QQ2-1-11' href='#x1-110005'>Build files</a></span><br />
 <span class='subsectionToc'>5.1 <a id='QQ2-1-12' href='#x1-120005.1'>User commands</a></span><br />
  <span class='subsubsectionToc'>5.1.1 <a id='QQ2-1-13' href='#x1-130005.1.1'>The <span class='rm-lmtt-10'>command</span> function</a></span><br />
  <span class='subsubsectionToc'>5.1.2 <a id='QQ2-1-14' href='#x1-140005.1.2'>The <span class='rm-lmtt-10'>settings table</span> table</a></span><br />
  <span class='subsubsectionToc'>5.1.3 <a id='QQ2-1-15' href='#x1-150005.1.3'>Repetition</a></span><br />
  <span class='subsubsectionToc'>5.1.4 <a id='QQ2-1-16' href='#x1-160005.1.4'>Expected exit code</a></span><br />
 <span class='subsectionToc'>5.2 <a id='QQ2-1-17' href='#x1-170005.2'>Provided commands</a></span><br />
 <span class='subsectionToc'>5.3 <a id='QQ2-1-18' href='#x1-180005.3'>File matches</a></span><br />
  <span class='subsubsectionToc'>5.3.1 <a id='QQ2-1-19' href='#x1-190005.3.1'>Filters</a></span><br />
  <span class='subsubsectionToc'>5.3.2 <a id='QQ2-1-20' href='#x1-200005.3.2'>DOM filters</a></span><br />
 <span class='subsectionToc'>5.4 <a id='QQ2-1-21' href='#x1-210005.4'>Image conversion</a></span><br />
 <span class='subsectionToc'>5.5 <a id='QQ2-1-22' href='#x1-220005.5'>The <span class='rm-lmtt-10'>mode</span> variable</a></span><br />
 <span class='subsectionToc'>5.6 <a id='QQ2-1-23' href='#x1-230005.6'>The <span class='rm-lmtt-10'>settings</span> table</a></span><br />
  <span class='subsubsectionToc'>5.6.1 <a id='QQ2-1-24' href='#x1-240005.6.1'>Default settings</a></span><br />
<span class='sectionToc'>6 <a id='QQ2-1-25' href='#x1-250006'>Configuration file</a></span><br />
 <span class='subsectionToc'>6.1 <a id='QQ2-1-26' href='#x1-260006.1'>Location</a></span><br />
 <span class='subsectionToc'>6.2 <a id='QQ2-1-27' href='#x1-270006.2'>Additional commands</a></span><br />
 <span class='subsectionToc'>6.3 <a id='QQ2-1-28' href='#x1-280006.3'>Example</a></span><br />
<span class='sectionToc'>7 <a id='QQ2-1-29' href='#x1-290007'>Development</a></span><br />
 <span class='subsectionToc'>7.1 <a id='QQ2-1-30' href='#x1-300007.1'>Custom filters</a></span><br />
 <span class='subsectionToc'>7.2 <a id='QQ2-1-31' href='#x1-310007.2'>New extensions</a></span><br />
 <span class='subsectionToc'>7.3 <a id='QQ2-1-32' href='#x1-320007.3'>How to add new output format</a></span><br />
<span class='sectionToc'>8 <a id='QQ2-1-33' href='#x1-330008'>List of available settings for filters and extensions.</a></span><br />
 <span class='subsectionToc'>8.1 <a id='QQ2-1-34' href='#x1-340008.1'>The <span class='rm-lmtt-10'>htlatex</span> command</a></span><br />
 <span class='subsectionToc'>8.2 <a id='QQ2-1-35' href='#x1-350008.2'>The <span class='rm-lmtt-10'>xindy</span> command</a></span><br />
 <span class='subsectionToc'>8.3 <a id='QQ2-1-36' href='#x1-360008.3'>The <span class='rm-lmtt-10'>tidy</span> extension</a></span><br />
 <span class='subsectionToc'>8.4 <a id='QQ2-1-37' href='#x1-370008.4'>The <span class='rm-lmtt-10'>collapsetoc</span> dom filter</a></span><br />
 <span class='subsectionToc'>8.5 <a id='QQ2-1-38' href='#x1-380008.5'>The <span class='rm-lmtt-10'>fixinlines</span> dom filter</a></span><br />
 <span class='subsectionToc'>8.6 <a id='QQ2-1-39' href='#x1-390008.6'>The <span class='rm-lmtt-10'>joincharacters</span> dom filter</a></span><br />
 <span class='subsectionToc'>8.7 <a id='QQ2-1-40' href='#x1-400008.7'>The <span class='rm-lmtt-10'>mathjaxnode</span> filter</a></span><br />
 <span class='subsectionToc'>8.8 <a id='QQ2-1-41' href='#x1-410008.8'>The <span class='rm-lmtt-10'>staticsite</span> filter and extension</a></span><br />
 <span class='subsectionToc'>8.9 <a id='QQ2-1-42' href='#x1-420008.9'>The <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension</a></span><br />
 <span class='subsectionToc'>8.10 <a id='QQ2-1-43' href='#x1-430008.10'>The <span class='rm-lmtt-10'>odttemplate</span> filter and extension</a></span><br />
 <span class='subsectionToc'>8.11 <a id='QQ2-1-44' href='#x1-440008.11'>The <span class='rm-lmtt-10'>aeneas</span> filter</a></span><br />
 <span class='subsectionToc'>8.12 <a id='QQ2-1-45' href='#x1-450008.12'>The <span class='rm-lmtt-10'>make4ht-aeneas-config</span> package</a></span><br />
  <span class='subsubsectionToc'>8.12.1 <a id='QQ2-1-46' href='#x1-460008.12.1'>Available parameters</a></span><br />
  <span class='subsubsectionToc'>8.12.2 <a id='QQ2-1-47' href='#x1-470008.12.2'>Additional parameters for the job configuration file</a></span><br />
  <span class='subsubsectionToc'>8.12.3 <a id='QQ2-1-48' href='#x1-480008.12.3'>Available <span class='rm-lmtt-10'>map</span> options</a></span><br />
  <span class='subsubsectionToc'>8.12.4 <a id='QQ2-1-49' href='#x1-490008.12.4'>Full example</a></span><br />
<span class='sectionToc'>9 <a id='QQ2-1-50' href='#x1-500009'>Troubleshooting</a></span><br />
 <span class='subsectionToc'>9.1 <a id='QQ2-1-51' href='#x1-510009.1'>Incorrect handling of command line arguments for <span class='rm-lmtt-10'>tex4ht</span>, <span class='rm-lmtt-10'>t4ht</span> or <span class='rm-lmtt-10'>latex</span></a></span><br />
 <span class='subsectionToc'>9.2 <a id='QQ2-1-52' href='#x1-520009.2'>Filenames containing spaces</a></span><br />
 <span class='subsectionToc'>9.3 <a id='QQ2-1-53' href='#x1-530009.3'>Filenames containing non-ASCII characters</a></span><br />
<span class='sectionToc'>10 <a id='QQ2-1-54' href='#x1-5400010'>License</a></span><br />
<span class='sectionToc'>11 <a id='QQ2-1-55' href='#x1-5500011'>Changelog</a></span></div>
<p><a id='introduction'></a></p>
<h3 class='sectionHead'><span class='titlemark'>1</span> <a id='x1-20001'></a>Introduction</h3>
<!-- l. 4 -->
<p class='noindent'><span class='rm-lmtt-10'>make4ht</span> is a build system for <span class='TEX'>T<span class='E'>E</span>X</span>4ht, <span class='TEX'>T<span class='E'>E</span>X</span> to XML converter. It provides a command line tool that drives the conversion process. It also provides a library that can be used to create customized conversion tools. An example of such tool is <a href='https://github.com/michal-h21/tex4ebook'>tex4ebook</a>, a tool for conversion from <span class='TEX'>T<span class='E'>E</span>X</span> to ePub and other e-book formats.</p>
<!-- l. 11 -->
<p class='indent'>The basic conversion from <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> to <span class='rm-lmtt-10'>HTML</span> using <span class='rm-lmtt-10'>make4ht</span> can be executed using the following command:</p>
<div class='verbatim' id='verbatim-1'>$ make4ht filename.tex</div>
<!-- l. 16 -->
<p class='nopar'></p>
<!-- l. 18 -->
<p class='indent'>It will produce a file named <span class='rm-lmtt-10'>filename.html</span> if the compilation goes without fatal errors.</p>
<!-- l. 22 -->
<p class='indent'><a id='clioptions'></a></p>
<h3 class='sectionHead'><span class='titlemark'>2</span> <a id='x1-30002'></a>Command line options</h3>
<div class='verbatim' id='verbatim-2'>make4ht - build system for TeX4ht  <br />
Usage:  <br />
make4ht [options] filename ["tex4ht.sty op." "tex4ht op."  <br />
     "t4ht op" "latex op"]  <br />
-b,--backend (default tex4ht) Backend used for xml generation.  <br />
     possible values: tex4ht or lua4ht  <br />
-c,--config (default xhtml) Custom config file  <br />
-d,--output-dir (default "")  Output directory  <br />
-e,--build-file (default nil)  If build filename is different  <br />
     than ‘filename‘.mk4  <br />
-f,--format  (default nil)  Output file format  <br />
-j,--jobname (default nil)  Set the jobname  <br />
-l,--lua  Use lualatex for document compilation  <br />
-m,--mode (default default) Switch which can be used in the makefile  <br />
-n,--no-tex4ht  Disable DVI file processing with tex4ht command  <br />
-s,--shell-escape Enables running external programs from LaTeX  <br />
-u,--utf8  For output documents in utf8 encoding  <br />
-x,--xetex Use xelatex for document compilation  <br />
-v,--version  Print version number  <br />
&lt;filename&gt; (string) Input filename</div>
<!-- l. 47 -->
<p class='nopar'></p>
<!-- l. 49 -->
<p class='indent'>It is still possible to invoke <span class='rm-lmtt-10'>make4ht</span> in the same way as is invoked <span class='rm-lmtt-10'>htlatex</span>:</p>
<div class='verbatim' id='verbatim-3'>$ make4ht filename "customcfg, charset=utf-8" "-cunihtf -utf8" "-dfoo"</div>
<!-- l. 54 -->
<p class='nopar'></p>
<!-- l. 56 -->
<p class='indent'>Note that this will not use <span class='rm-lmtt-10'>make4ht</span> routines for the output directory handling. See section <a href='#x1-70003.3'>3.3<!-- tex4ht:ref: sec:output-dir  --></a> for more information about this issue. To use these routines, change the previous listing to:</p>
<div class='verbatim' id='verbatim-4'>$ make4ht -d foo filename "customcfg, charset=utf-8" "-cunihtf -utf8"</div>
<!-- l. 63 -->
<p class='nopar'></p>
<!-- l. 65 -->
<p class='indent'>This call has the same effect as the following:</p>
<div class='verbatim' id='verbatim-5'>$ make4ht -u -c customcfg -d foo filename</div>
<!-- l. 69 -->
<p class='nopar'></p>
<!-- l. 71 -->
<p class='indent'>Output directory doesn’t have to exist, it will be created automatically. Specified path can be relative to the current directory, or absolute:</p>
<div class='verbatim' id='verbatim-6'>$ make4ht -d use/current/dir/ filename  <br />
$ make4ht -d ../gotoparrentdir filename  <br />
$ make4ht -d ~/gotohomedir filename  <br />
$ make4ht -d c:\documents\windowspathsareworkingtoo filename</div>
<!-- l. 80 -->
<p class='nopar'></p>
<!-- l. 82 -->
<p class='indent'>The short options that don’t take parameters can be collapsed:</p>
<div class='verbatim' id='verbatim-7'>$ make4ht -ulc customcfg -d foo filename</div>
<!-- l. 86 -->
<p class='nopar'></p>
<!-- l. 88 -->
<p class='indent'>To pass output from the other commands to <span class='rm-lmtt-10'>make4ht</span> use the <span class='rm-lmtt-10'>-</span> character as a filename. It is best to use this feature together with the <span class='rm-lmtt-10'>--jobname</span> or <span class='rm-lmtt-10'>-j</span> option.</p>
<div class='verbatim' id='verbatim-8'>$ cat hello.tex | make4ht -j world -</div>
<!-- l. 94 -->
<p class='nopar'></p>
<!-- l. 98 -->
<p class='indent'><a id='why-make4ht-htlatex-issues'></a></p>
<h3 class='sectionHead'><span class='titlemark'>3</span> <a id='x1-40003'></a>Why <span class='rm-lmtt-10'>make4ht</span>? – <span class='rm-lmtt-10'>htlatex</span> issues</h3>
<!-- l. 100 -->
<p class='noindent'><span class='TEX'>T<span class='E'>E</span>X</span>4ht system supports several output formats, most notably <span class='rm-lmtt-10'>XHTML</span>, <span class='rm-lmtt-10'>HTML 5</span> and <span class='rm-lmtt-10'>ODT</span>, but it also supports <span class='rm-lmtt-10'>TEI</span> or <span class='rm-lmtt-10'>Docbook</span>.</p>
<!-- l. 104 -->
<p class='indent'>The conversion can be invoked using several scripts, which are distributed with <span class='TEX'>T<span class='E'>E</span>X</span>4ht. They differ in parameters passed to the underlying commands.</p>
<!-- l. 108 -->
<p class='indent'>These scripts invoke <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> or Plain <span class='TEX'>T<span class='E'>E</span>X</span> with special instructions to load the <span class='rm-lmtt-10'>tex4ht.sty</span> package. The <span class='TEX'>T<span class='E'>E</span>X</span> run produces a special <span class='rm-lmtt-10'>DVI</span> file which contains the code for the desired output format. The produced <span class='rm-lmtt-10'>DVI</span> file is then processed using the <span class='rm-lmtt-10'>tex4ht</span> command, which in conjunction with the <span class='rm-lmtt-10'>t4ht</span> command produces the desired output files.</p>
<!-- l. 117 -->
<p class='indent'><a id='passing-command-line-arguments'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.1</span> <a id='x1-50003.1'></a>Passing command line arguments</h4>
<!-- l. 119 -->
<p class='noindent'>The basic conversion script provided by <span class='TEX'>T<span class='E'>E</span>X</span>4ht system is named <span class='rm-lmtt-10'>htlatex</span>. It compiles <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span>  files to <span class='rm-lmtt-10'>HTML</span> with this command sequence:</p>
<div class='verbatim' id='verbatim-9'>$ latex $latex_options ’code for loading tex4ht.sty \input{filename}’  <br />
$ latex $latex_options ’code for loading tex4ht.sty \input{filename}’  <br />
$ latex $latex_options ’code for loading tex4ht.sty \input{filename}’  <br />
$ tex4ht $tex4ht_options filename  <br />
$ t4ht $t4ht_options filename</div>
<!-- l. 129 -->
<p class='nopar'></p>
<!-- l. 131 -->
<p class='indent'>The options for various parts of the system can be passed on the command line:</p>
<div class='verbatim' id='verbatim-10'>$ htlatex filename "tex4ht.sty options" "tex4ht_options" "t4ht_options" "latex_options"</div>
<!-- l. 136 -->
<p class='nopar'></p>
<!-- l. 138 -->
<p class='indent'>For basic <span class='rm-lmtt-10'>HTML</span> conversion it is possible to use the most basic invocation:</p>
<div class='verbatim' id='verbatim-11'>$ htlatex filename.tex</div>
<!-- l. 143 -->
<p class='nopar'></p>
<!-- l. 145 -->
<p class='indent'>It can be much more involved for the <span class='rm-lmtt-10'>HTML 5</span> output in <span class='rm-lmtt-10'>UTF-8</span> encoding:</p>
<div class='verbatim' id='verbatim-12'>$ htlatex filename.tex "xhtml,html5,charset=utf-8" " -cmozhtf -utf8"</div>
<!-- l. 150 -->
<p class='nopar'></p>
<!-- l. 152 -->
<p class='indent'><span class='rm-lmtt-10'>make4ht</span> can simplify it:</p>
<div class='verbatim' id='verbatim-13'>$ make4ht -u filename.tex</div>
<!-- l. 156 -->
<p class='nopar'></p>
<!-- l. 158 -->
<p class='indent'>The <span class='rm-lmtt-10'>-u</span> option requires the <span class='rm-lmtt-10'>UTF-8</span> encoding. <span class='rm-lmtt-10'>HTML 5</span> is used as the default output format by <span class='rm-lmtt-10'>make4ht</span>.</p>
<!-- l. 162 -->
<p class='indent'>More information about the command line arguments can be found in section <a href='#x1-30002'>2<!-- tex4ht:ref: sec:clioptions  --></a>.</p>
<!-- l. 166 -->
<p class='indent'><a id='compilation-sequence'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.2</span> <a id='x1-60003.2'></a>Compilation sequence</h4>
<!-- l. 168 -->
<p class='noindent'><span class='rm-lmtt-10'>htlatex</span> has a fixed compilation order and hard-coded number of <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> invocations.</p>
<!-- l. 171 -->
<p class='indent'>It is not possible to execute additional commands during the compilation. When we want to run a program that interacts with <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span>, such as <span class='rm-lmtt-10'>Makeindex</span> or <span class='rm-lmtt-10'>Bibtex</span>, we have two options. The first option is to create a new script based on <span class='rm-lmtt-10'>htlatex</span> and add the wanted commands to the modified script. The
second option is to execute <span class='rm-lmtt-10'>htlatex</span>, then the additional and then <span class='rm-lmtt-10'>htlatex</span> again. The second option means that <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> will be invoked six times, as each call to <span class='rm-lmtt-10'>htlatex</span> executes three calls to <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span>. This can lead to
significantly long compilation times.</p>
<!-- l. 181 -->
<p class='indent'><span class='rm-lmtt-10'>make4ht</span> provides a solution for this issue using a build file, or extensions. These can be used for interaction with external tools.</p>
<!-- l. 184 -->
<p class='indent'><span class='rm-lmtt-10'>make4ht</span> also provides compilation modes, which enables to select commands that should be executed using a command line option.</p>
<!-- l. 187 -->
<p class='indent'>There is a built-in <span class='rm-lmtt-10'>draft</span> mode, which invokes <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> only once, instead of the default three invocations. It is useful for the compilations of the document before its final stage, when it is not important that all cross-references work. It can save quite a lot of the compilation time:</p>
<div class='verbatim' id='verbatim-14'>$ make4ht -um draft filename.tex</div>
<!-- l. 195 -->
<p class='nopar'></p>
<!-- l. 197 -->
<p class='indent'>More information about the build files can be found in section <a href='#x1-110005'>5<!-- tex4ht:ref: sec:buildfiles  --></a>.</p>
<!-- l. 202 -->
<p class='indent'><a id='handling-of-the-generated-files'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.3</span> <a id='x1-70003.3'></a>Handling of the generated files</h4>
<!-- l. 206 -->
<p class='noindent'>There are also issues with the behaviour of the <span class='rm-lmtt-10'>t4ht</span> application. It reads the <span class='rm-lmtt-10'>.lg</span> file generated by the <span class='rm-lmtt-10'>tex4ht</span> command. This file contains information about the generated files, <span class='rm-lmtt-10'>CSS</span> instructions, calls to the external applications, instructions for image conversions, etc.</p>
<!-- l. 212 -->
<p class='indent'><span class='rm-lmtt-10'>t4ht</span> can be instructed to copy the generated files to an output directory, but it doesn’t preserve the directory structure. When the images are placed in a<br class='newline' />
subdirectory, they will be copied to the output directory, losing the directory structure. Links will be pointing to a non-existing subdirectory. The following command should copy all output files to the correct destinations.</p>
<div class='verbatim' id='verbatim-15'>$ make4ht -d outputdir filename.tex</div>
<!-- l. 222 -->
<p class='nopar'></p>
<!-- l. 226 -->
<p class='indent'><a id='image-conversion-and-post-processing-of-the-generated-files'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.4</span> <a id='x1-80003.4'></a>Image conversion and post-processing of the generated files</h4>
<!-- l. 228 -->
<p class='noindent'><span class='TEX'>T<span class='E'>E</span>X</span>4ht can convert parts of the document to images. This is useful for diagrams or complicated math, for example.</p>
<!-- l. 231 -->
<p class='indent'>By default, the image conversion is configured in a <a href='http://www.tug.org/applications/tex4ht/mn35.html#index35-73001'><span class='rm-lmtt-10'>.env</span> file</a>. It has a bit of strange syntax, with <a href='http://www.tug.org/applications/tex4ht/mn-unix.html#index27-69005'>operating system dependent</a> rules. <span class='rm-lmtt-10'>make4ht</span> provides simpler means for the image conversion in the build files. It is possible to change the image conversion parameters
without a need to modify the <span class='rm-lmtt-10'>.env</span> file. The process is described in section <a href='#x1-210005.4'>5.4<!-- tex4ht:ref: sec:imageconversion  --></a>.</p>
<!-- l. 240 -->
<p class='indent'>It is also possible to post-process the generated output files. The post-processing can be done either using external programs such as <span class='rm-lmtt-10'>XSLT</span> processors and <span class='rm-lmtt-10'>HTML Tidy</span> or using <span class='rm-lmtt-10'>Lua</span> functions. More information can be found in section <a href='#x1-180005.3'>5.3<!-- tex4ht:ref: sec:postprocessing  --></a>.</p>
<!-- l. 248 -->
<p class='indent'><a id='output-file-formats-and-extensions'></a></p>
<h3 class='sectionHead'><span class='titlemark'>4</span> <a id='x1-90004'></a>Output file formats and extensions</h3>
<!-- l. 250 -->
<p class='noindent'>The default output format used by <span class='rm-lmtt-10'>make4ht</span> is <span class='rm-lmtt-10'>html5</span>. A different format can be requested using the <span class='rm-lmtt-10'>--format</span> option. Supported formats are:</p>
<ul class='itemize1'>
<li class='itemize'><span class='rm-lmtt-10'>xhtml</span></li>
<li class='itemize'><span class='rm-lmtt-10'>html5</span></li>
<li class='itemize'><span class='rm-lmtt-10'>odt</span></li>
<li class='itemize'><span class='rm-lmtt-10'>tei</span></li>
<li class='itemize'><span class='rm-lmtt-10'>docbook</span></li>
</ul>
<!-- l. 268 -->
<p class='indent'>The <span class='rm-lmtt-10'>--format</span> option can be also used for extension loading.</p>
<!-- l. 271 -->
<p class='indent'><a id='extensions'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>4.1</span> <a id='x1-100004.1'></a>Extensions</h4>
<!-- l. 273 -->
<p class='noindent'>Extensions can be used to modify the build process without the need to use a build file. They may post-process the output files or request additional commands for the compilation.</p>
<!-- l. 277 -->
<p class='indent'>The extensions can be enabled or disabled by appending <span class='rm-lmtt-10'>+EXTENSION</span> or <span class='rm-lmtt-10'>-EXTENSION</span> after the output format name:</p>
<div class='verbatim' id='verbatim-16'> $ make4ht -uf html5+tidy filename.tex</div>
<!-- l. 282 -->
<p class='nopar'></p>
<!-- l. 284 -->
<p class='indent'>Available extensions:</p>
<!-- l. 286 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>common_filters</span></dt>
<dd class='description'>clean the output HTML files using filters.</dd>
<dt class='description'><span class='rm-lmbx-10'>common_domfilters</span></dt>
<dd class='description'>clean the HTML file using DOM filters. It is more powerful than <span class='rm-lmtt-10'>common_filters</span>. Used DOM filters are <span class='rm-lmtt-10'>fixinlines</span>, <span class='rm-lmtt-10'>idcolons</span> and <span class='rm-lmtt-10'>joincharacters</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>dvisvgm_hashes</span></dt>
<dd class='description'>efficient generation of SVG pictures using Dvisvgm. It can utilize multiple processor cores and generates only changed images.</dd>
<dt class='description'><span class='rm-lmbx-10'>join_colors</span></dt>
<dd class='description'>load the <span class='rm-lmtt-10'>joincolors</span> domfilter for all HTML files.</dd>
<dt class='description'><span class='rm-lmbx-10'>latexmk_build</span></dt>
<dd class='description'>use <a href='https://ctan.org/pkg/latexmk?lang=en'>Latexmk</a> for the <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> compilation.</dd>
<dt class='description'><span class='rm-lmbx-10'>mathjaxnode</span></dt>
<dd class='description'>use <a href='https://github.com/pkra/mathjax-node-page/'>mathjax-node-page</a> to convert from MathML code to HTML + CSS or SVG. See <a href='#mathjaxsettings'>the available settings</a>.</dd>
<dt class='description'><span class='rm-lmbx-10'>odttemplate</span></dt>
<dd class='description'>it automatically loads the <span class='rm-lmtt-10'>odttemplate</span> filter (page <a href='#x1-190005.3.1'>32<!-- tex4ht:ref: sec:odttemplate  --></a>).</dd>
<dt class='description'><span class='rm-lmbx-10'>preprocess_input</span></dt>
<dd class='description'>compilation of the formats supported by <a href='https://yihui.name/knitr/'>Knitr</a> (<span class='rm-lmtt-10'>.Rnw</span>, <span class='rm-lmtt-10'>.Rtex</span>, <span class='rm-lmtt-10'>.Rmd</span>, <span class='rm-lmtt-10'>.Rrst</span>) and also Markdown and reStructuredText formats. It requires <a href='https://www.r-project.org/'>R</a> + <a href='https://yihui.name/knitr/'>Knitr</a> installation, it requires also <a href='https://pandoc.org/'>Pandoc</a> for formats based on
Markdown or reStructuredText.</dd>
<dt class='description'><span class='rm-lmbx-10'>staticsite</span></dt>
<dd class='description'>build the document in a form suitable for static site generators like <a href='https://jekyllrb.com/'>Jekyll</a>.</dd>
<dt class='description'><span class='rm-lmbx-10'>tidy</span></dt>
<dd class='description'>clean the <span class='rm-lmtt-10'>HTML</span> files using the <span class='rm-lmtt-10'>tidy</span> command.</dd>
</dl>
<!-- l. 324 -->
<p class='indent'><a id='build-files'></a></p>
<h3 class='sectionHead'><span class='titlemark'>5</span> <a id='x1-110005'></a>Build files</h3>
<!-- l. 328 -->
<p class='noindent'><span class='rm-lmtt-10'>make4ht</span> supports build files. These are <span class='rm-lmtt-10'>Lua</span> scripts that can adjust the build process. They can request external applications like <span class='rm-lmtt-10'>BibTeX</span> or <span class='rm-lmtt-10'>Makeindex</span>, pass options to the commands, modify the image conversion process, or post-process the generated files.</p>
<!-- l. 334 -->
<p class='indent'><span class='rm-lmtt-10'>make4ht</span> tries to load default build file named as <span class='rm-lmtt-10'>filename + .mk4 extension</span>. It is possible to select a different build file with <span class='rm-lmtt-10'>-e</span> or <span class='rm-lmtt-10'>--build-file</span> command line option.</p>
<!-- l. 339 -->
<p class='indent'>Sample build file:</p>
<div class='verbatim' id='verbatim-17'>Make:htlatex()  <br />
Make:match("html$", "tidy -m -xml -utf8 -q -i ${filename}")</div>
<!-- l. 344 -->
<p class='nopar'></p>
<!-- l. 346 -->
<p class='indent'><span class='rm-lmtt-10'>Make:htlatex()</span> is preconfigured command for calling <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> with the <span class='rm-lmtt-10'>tex4ht.sty</span> package loaded. In this example, it will be executed only once. After the compilation, the <span class='rm-lmtt-10'>tidy</span> command is executed on the output <span class='rm-lmtt-10'>HTML</span> files.</p>
<!-- l. 351 -->
<p class='indent'>Note that it is not necessary to call <span class='rm-lmtt-10'>tex4ht</span> and <span class='rm-lmtt-10'>t4ht</span> commands explicitly in the build file, they are called automatically.</p>
<!-- l. 355 -->
<p class='indent'><a id='user-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.1</span> <a id='x1-120005.1'></a>User commands</h4>
<!-- l. 357 -->
<p class='noindent'>It is possible to add more commands like <span class='rm-lmtt-10'>Make:htlatex</span> using the <span class='rm-lmtt-10'>Make:add</span> command:</p>
<div class='verbatim' id='verbatim-18'>Make:add("name", "command", {settings table}, repetition)</div>
<!-- l. 362 -->
<p class='nopar'></p>
<!-- l. 364 -->
<p class='indent'>This defines the <span class='rm-lmtt-10'>name</span> command, which can be then executed using <span class='rm-lmtt-10'>Make:name()</span> command in the build file.</p>
<!-- l. 367 -->
<p class='indent'>The <span class='rm-lmtt-10'>name</span> and <span class='rm-lmtt-10'>command</span> parameters are required, the rest of the parameters are optional.</p>
<!-- l. 370 -->
<p class='indent'>The defined command receives a table with settings as a parameter at the call time. The default settings are provided by <span class='rm-lmtt-10'>make4ht</span>. Additional settings can be declared in the <span class='rm-lmtt-10'>Make:add</span> commands, user can also override the default settings when the command is executed in the build file:</p>
<div class='verbatim' id='verbatim-19'>Make:name({hello="world"})</div>
<!-- l. 378 -->
<p class='nopar'></p>
<!-- l. 380 -->
<p class='indent'>More information about settings, including the default settings provided by <span class='rm-lmtt-10'>make4ht</span>, can be found in the section <a href='#x1-230005.6'>5.6<!-- tex4ht:ref: sec:settings  --></a> on the page <a href='#x1-230005.6'>38<!-- tex4ht:ref: sec:settings  --></a>.</p>
<!-- l. 386 -->
<p class='indent'><a id='the-command-function'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.1</span> <a id='x1-130005.1.1'></a>The <span class='rm-lmtt-10'>command</span> function</h5>
<!-- l. 390 -->
<p class='noindent'>The <span class='rm-lmtt-10'>command</span> parameter can be either string template or function:</p>
<div class='verbatim' id='verbatim-20'>Make:add("text", "echo hello, input file: ${input}")</div>
<!-- l. 395 -->
<p class='nopar'></p>
<!-- l. 397 -->
<p class='indent'>The template can get a variable value from the parameters table using a <span class='rm-lmtt-10'>${var_name}</span> placeholder. Templates are executed using the operating system, so they should invoke existing OS commands.</p>
<!-- l. 403 -->
<p class='indent'><a id='the-settings-table-table'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.2</span> <a id='x1-140005.1.2'></a>The <span class='rm-lmtt-10'>settings table</span> table</h5>
<!-- l. 405 -->
<p class='noindent'>The <span class='rm-lmtt-10'>settings table</span> parameter is optional. If it is present, it should be table with new settings available in the command. It can also override the default <span class='rm-lmtt-10'>make4ht</span> settings for the defined command.</p>
<div class='verbatim' id='verbatim-21'>Make:add("sample_function", function(params)  <br />
  for k, v in pairs(params) do  <br />
    print(k..": "..v)  <br />
  end, {custom="Hello world"}  <br />
)</div>
<!-- l. 415 -->
<p class='nopar'></p>
<!-- l. 418 -->
<p class='indent'><a id='repetition'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.3</span> <a id='x1-150005.1.3'></a>Repetition</h5>
<!-- l. 420 -->
<p class='noindent'>The <span class='rm-lmtt-10'>repetition</span> parameter specifies the maximum number of executions of the particular command. This is used for instance for <span class='rm-lmtt-10'>tex4ht</span> and <span class='rm-lmtt-10'>t4ht</span> commands, as they should be executed only once in the compilation. They would be executed multiple times when they are included in the build file, as they are called by <span class='rm-lmtt-10'>make4ht</span> by default. Because these commands allow only
one <span class='rm-lmtt-10'>repetition</span>, the second execution is blocked.</p>
<!-- l. 429 -->
<p class='indent'><a id='expected-exit-code'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.4</span> <a id='x1-160005.1.4'></a>Expected exit code</h5>
<!-- l. 431 -->
<p class='noindent'>You can set the expected exit code from a command with a <span class='rm-lmtt-10'>correct_exit</span> key in the settings table. The compilation will be terminated when the command returns a different exit code.</p>
<div class='verbatim' id='verbatim-22'>Make:add("biber", "biber ${input}", {correct_exit=0})</div>
<!-- l. 437 -->
<p class='nopar'></p>
<!-- l. 439 -->
<p class='indent'>Commands that execute lua functions can return the numerical values using the <span class='rm-lmtt-10'>return</span> statement.</p>
<!-- l. 442 -->
<p class='indent'>This mechanism isn’t used for <span class='TEX'>T<span class='E'>E</span>X</span>, because it doesn’t differentiate between fatal and non-fatal errors. It returns the same exit code in all cases. Because of this, log parsing is used for a fatal error detection instead. Error code value <span class='rm-lmtt-10'>1</span> is returned in the case of a fatal error, <span class='rm-lmtt-10'>0</span> is used otherwise. The <span class='rm-lmtt-10'>Make.testlogfile</span> function can be used in
the build file to detect compilation errors in the TeX log file.</p>
<!-- l. 451 -->
<p class='indent'><a id='provided-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.2</span> <a id='x1-170005.2'></a>Provided commands</h4>
<!-- l. 453 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmtk-10'>Make:htlatex</span></dt>
<dd class='description'>One call to the TeX engine with special configuration for loading of the <span class='rm-lmtt-10'>tex4ht.sty</span> package.</dd>
<dt class='description'><span class='rm-lmtk-10'>Make:latexmk</span></dt>
<dd class='description'>Use <span class='rm-lmtt-10'>Latexmk</span> for the document compilation. <span class='rm-lmtt-10'>tex4ht.sty</span> will be loaded automatically.</dd>
<dt class='description'><span class='rm-lmtk-10'>Make:tex4ht</span></dt>
<dd class='description'>Process the <span class='rm-lmtt-10'>DVI</span> file and create output files.</dd>
<dt class='description'><span class='rm-lmtk-10'>Make:t4ht</span></dt>
<dd class='description'>Create the CSS file and generate images.</dd>
<dt class='description'><span class='rm-lmtk-10'>Make:biber</span></dt>
<dd class='description'>Process bibliography using the <span class='rm-lmtt-10'>biber</span> command.</dd>
<dt class='description'><span class='rm-lmtk-10'>Make:xindy</span></dt>
<dd class='description'>Generate index using Xindy index processor.</dd>
</dl>
<!-- l. 471 -->
<p class='noindent'><a id='file-matches'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.3</span> <a id='x1-180005.3'></a>File matches</h4>
<!-- l. 475 -->
<p class='noindent'>Another type of action that can be specified in the build file is <span class='rm-lmtt-10'>Make:match</span>. It can be used to post-process the generated files:</p>
<div class='verbatim' id='verbatim-23'>Make:match("html$", "tidy -m -xml -utf8 -q -i ${filename}")</div>
<!-- l. 480 -->
<p class='nopar'></p>
<!-- l. 482 -->
<p class='indent'>The above example will clean all output <span class='rm-lmtt-10'>HTML</span> files using the <span class='rm-lmtt-10'>tidy</span> command.</p>
<!-- l. 485 -->
<p class='indent'>The <span class='rm-lmtt-10'>Make:match</span> action tests output filenames using a <span class='rm-lmtt-10'>Lua</span> pattern matching function.<br class='newline' />
It executes a command or a function, specified in the second argument, on files whose filenames match the pattern.</p>
<!-- l. 490 -->
<p class='indent'>The commands to be executed can be specified as strings. They can contain <span class='rm-lmtt-10'>${var_name}</span> placeholders, which are replaced with corresponding variables from the <span class='rm-lmtt-10'>settings</span> table. The templating system was described in subsection <a href='#x1-130005.1.1'>5.1.1<!-- tex4ht:ref: sec:commandfunction  --></a>. There is an additional variable
available in this table, called <span class='rm-lmtt-10'>filename</span>. It contains the name of the current output file.</p>
<!-- l. 497 -->
<p class='indent'>If a function is used instead, it will get two parameters. The first one is the current filename, the second one is the <span class='rm-lmtt-10'>settings</span> table.</p>
<div class='verbatim' id='verbatim-24'>Make:match("html$", function(filename, settings)  <br />
  print("Post-processing file: ".. filename)  <br />
  print("Available settings")  <br />
  for k,v in pairs(settings)  <br />
    print(k,v)  <br />
  end  <br />
  return true</div>
<!-- l. 508 -->
<p class='nopar'></p>
<!-- l. 510 -->
<p class='indent'>end)</p>
<!-- l. 512 -->
<p class='indent'>Multiple post-processing actions can be executed on each filename. The Lua action functions can return exit code. If the exit code is false, the execution of the post-processing chain for the current file will be terminated.</p>
<!-- l. 518 -->
<p class='indent'><a id='filters'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.3.1</span> <a id='x1-190005.3.1'></a>Filters</h5>
<!-- l. 522 -->
<p class='noindent'>To make it easier to post-process the generated files using the <span class='rm-lmtt-10'>match</span> actions, <span class='rm-lmtt-10'>make4ht</span> provides a filtering mechanism thanks to the <span class='rm-lmtt-10'>make4ht-filter</span> module.</p>
<!-- l. 526 -->
<p class='indent'>The <span class='rm-lmtt-10'>make4ht-filter</span> module returns a function that can be used for the filter chain building. Multiple filters can be chained into a pipeline. Each filter can modify the string that is passed to it from the previous filters. The changes are then saved to the processed file.</p>
<!-- l. 531 -->
<p class='indent'>Several built-in filters are available, it is also possible to create new ones.</p>
<!-- l. 534 -->
<p class='indent'>Example that use only the built-in filters:</p>
<div class='verbatim' id='verbatim-25'>local filter = require "make4ht-filter"  <br />
local process = filter{"cleanspan", "fixligatures", "hruletohr"}  <br />
Make:htlatex()  <br />
Make:match("html$",process)</div>
<!-- l. 541 -->
<p class='nopar'></p>
<!-- l. 543 -->
<p class='indent'>Function <span class='rm-lmtt-10'>filter</span> accepts also function arguments, in this case this function takes file contents as a parameter and modified contents are returned.</p>
<!-- l. 547 -->
<p class='indent'>Example with custom filter:</p>
<div class='verbatim' id='verbatim-26'>local filter  = require "make4ht-filter"  <br />
local changea = function(s) return s:gsub("a","z") end  <br />
local process = filter{"cleanspan", "fixligatures", changea}  <br />
Make:htlatex()  <br />
Make:match("html$",process)</div>
<!-- l. 555 -->
<p class='nopar'></p>
<!-- l. 557 -->
<p class='indent'>In this example, spurious span elements are joined, ligatures are decomposed, and then all letters “a” are replaced with “z” letters.</p>
<!-- l. 560 -->
<p class='indent'>Built-in filters are the following:</p>
<!-- l. 562 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>cleanspan</span></dt>
<dd class='description'>clean spurious span elements when accented characters are used</dd>
<dt class='description'><span class='rm-lmbx-10'>cleanspan-nat</span></dt>
<dd class='description'>alternative clean span filter, provided by Nat Kuhn</dd>
<dt class='description'><span class='rm-lmbx-10'>fixligatures</span></dt>
<dd class='description'>decompose ligatures to base characters</dd>
<dt class='description'><span class='rm-lmbx-10'>hruletohr</span></dt>
<dd class='description'><span class='rm-lmtt-10'>\hrule</span> commands are translated to series of underscore characters by <span class='TEX'>T<span class='E'>E</span>X</span>4ht, this filter translates these underscores to <span class='rm-lmtt-10'>&lt;hr&gt;</span> elements</dd>
<dt class='description'><span class='rm-lmbx-10'>entites</span></dt>
<dd class='description'>convert prohibited named entities to numeric entities (only <span class='rm-lmtt-10'>&amp;nbsp;</span> currently).</dd>
<dt class='description'><span class='rm-lmbx-10'>fix-links</span></dt>
<dd class='description'>replace colons in local links and <span class='rm-lmtt-10'>id</span> attributes with underscores. Some cross-reference commands may produce colons in internal links, which results in a validation error.</dd>
<dt class='description'><span class='rm-lmbx-10'>mathjaxnode</span></dt>
<dd class='description'>use <a href='https://github.com/pkra/mathjax-node-page/'>mathjax-node-page</a> to convert from MathML code to HTML + CSS or SVG. See <a href='#mathjaxsettings'>the available settings</a>.</dd>
<dt class='description'><span class='rm-lmbx-10'>odttemplate</span></dt>
<dd class='description'>use styles from another <span class='rm-lmtt-10'>ODT</span> file serving as a template in the current document. It works for the <span class='rm-lmtt-10'>styles.xml</span> file in the <span class='rm-lmtt-10'>ODT</span> file. During the compilation, this file is named as <span class='rm-lmtt-10'>\jobname.4oy</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>staticsite</span></dt>
<dd class='description'>create HTML files in a format suitable for static site generators such as <a href='https://jekyllrb.com/'>Jekyll</a></dd>
<dt class='description'><span class='rm-lmbx-10'>svg-height</span></dt>
<dd class='description'>some SVG images produced by <span class='rm-lmtt-10'>dvisvgm</span> seem to have wrong dimensions. This filter tries to set the correct image size.</dd>
</dl>
<!-- l. 598 -->
<p class='indent'><a id='dom-filters'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.3.2</span> <a id='x1-200005.3.2'></a>DOM filters</h5>
<!-- l. 600 -->
<p class='noindent'>DOM filters are variants of filters that use the <a href='https://ctan.org/pkg/luaxml'><span class='rm-lmtt-10'>LuaXML</span></a> library to modify directly the XML object. This enables more powerful operations than the regex-based filters from the previous section.</p>
<!-- l. 605 -->
<p class='indent'>Example:</p>
<div class='verbatim' id='verbatim-27'>local domfilter = require "make4ht-domfilter"  <br />
local process = domfilter {"joincharacters"}  <br />
Make:match("html$", process)</div>
<!-- l. 611 -->
<p class='nopar'></p>
<!-- l. 613 -->
<p class='indent'>Available DOM filters:</p>
<!-- l. 615 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>aeneas</span></dt>
<dd class='description'><a href='https://www.readbeyond.it/aeneas/'>Aeneas</a> is a tool for automagical synchronization of text and audio. This filter modifies the HTML code to support synchronization.</dd>
<dt class='description'><span class='rm-lmbx-10'>collapsetoc</span></dt>
<dd class='description'>collapse table of contents to contain only top-level sectioning level and sections on the current page.</dd>
<dt class='description'><span class='rm-lmbx-10'>fixinlines</span></dt>
<dd class='description'>put all inline elements which are direct children of the <span class='rm-lmtt-10'>&lt;body&gt;</span> elements to a paragraph.</dd>
<dt class='description'><span class='rm-lmbx-10'>idcolons</span></dt>
<dd class='description'>replace the colon (<span class='rm-lmtt-10'>:</span>) character in internal links and <span class='rm-lmtt-10'>id</span> attributes. They cause validation issues.</dd>
<dt class='description'><span class='rm-lmbx-10'>joincharacters</span></dt>
<dd class='description'>join consecutive <span class='rm-lmtt-10'>&lt;span&gt;</span> or <span class='rm-lmtt-10'>&lt;mn&gt;</span> elements. This DOM filter supersedes the <span class='rm-lmtt-10'>cleanspan</span> filter.</dd>
<dt class='description'><span class='rm-lmbx-10'>joincolors</span></dt>
<dd class='description'>many <span class='rm-lmtt-10'>&lt;span&gt;</span> elements with unique <span class='rm-lmtt-10'>id</span> attributes are created when <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> colors are being used in the document. A CSS rule is added for each of these elements, which may result in substantial growth of the CSS file. This filter replaces these rules with a common one for elements with
the same color value.</dd>
<dt class='description'><span class='rm-lmbx-10'>odtimagesize</span></dt>
<dd class='description'>set correct dimensions for images in the ODT format. It is loaded by default for the ODT output.</dd>
<dt class='description'><span class='rm-lmbx-10'>odtpartable</span></dt>
<dd class='description'>resolve tables nested inside paragraphs, which is invalid in the ODT format.</dd>
<dt class='description'><span class='rm-lmbx-10'>t4htlinks</span></dt>
<dd class='description'>fix hyperlinks in the ODT format.</dd>
</dl>
<!-- l. 650 -->
<p class='indent'><a id='image-conversion'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.4</span> <a id='x1-210005.4'></a>Image conversion</h4>
<!-- l. 654 -->
<p class='noindent'>It is possible to convert parts of the <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> input as pictures. It can be used for preserving the appearance of math or diagrams, for example.</p>
<!-- l. 657 -->
<p class='indent'>These pictures are stored in a special <span class='rm-lmtt-10'>DVI</span> file, which can be processed by a <span class='rm-lmtt-10'>DVI</span> to image commands, such as <span class='rm-lmtt-10'>dvipng</span> or <span class='rm-lmtt-10'>dvisvgm</span>.</p>
<!-- l. 661 -->
<p class='indent'>This conversion is normally configured in the <span class='rm-lmtt-10'>tex4ht.env</span> file. This file is system dependent and it has quite an unintuitive syntax. The configuration is processed by the <span class='rm-lmtt-10'>t4ht</span> application and the conversion command is called for all pictures.</p>
<!-- l. 666 -->
<p class='indent'>It is possible to disable <span class='rm-lmtt-10'>t4ht</span> image processing and configure image conversion in the build file using the <span class='rm-lmtt-10'>image</span> action:</p>
<div class='verbatim' id='verbatim-28'>Make:image("png$",  <br />
"dvipng -bg Transparent -T tight -o ${output}  -pp ${page} ${source}")</div>
<!-- l. 672 -->
<p class='nopar'></p>
<!-- l. 674 -->
<p class='indent'><span class='rm-lmtt-10'>Make:image</span> takes two parameters, a <span class='rm-lmtt-10'>Lua</span> pattern to match the image name, and the action.</p>
<!-- l. 677 -->
<p class='indent'>Action can be either a string template with the conversion command, or a function that takes a table with parameters as an argument.</p>
<!-- l. 680 -->
<p class='indent'>There are three parameters:</p>
<ul class='itemize1'>
<li class='itemize'><span class='rm-lmtt-10'>output</span> - output image filename</li>
<li class='itemize'><span class='rm-lmtt-10'>source</span> - <span class='rm-lmtt-10'>DVI</span> file with the pictures</li>
<li class='itemize'><span class='rm-lmtt-10'>page</span> - page number of the converted image</li>
</ul>
<!-- l. 694 -->
<p class='indent'><a id='the-mode-variable'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.5</span> <a id='x1-220005.5'></a>The <span class='rm-lmtt-10'>mode</span> variable</h4>
<!-- l. 696 -->
<p class='noindent'>The <span class='rm-lmtt-10'>mode</span> variable available in the build process contains contents of the <span class='rm-lmtt-10'>--mode</span> command line option. It can be used to run some commands conditionally. For example:</p>
<div class='verbatim' id='verbatim-29'> if mode == "draft" then  <br />
   Make:htlatex{}  <br />
 else  <br />
   Make:htlatex{}  <br />
   Make:htlatex{}  <br />
   Make:htlatex{}  <br />
 end</div>
<!-- l. 708 -->
<p class='nopar'></p>
<!-- l. 710 -->
<p class='indent'>In this example (which is the default configuration used by <span class='rm-lmtt-10'>make4ht</span>), <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> is called only once when <span class='rm-lmtt-10'>make4ht</span> is called with the <span class='rm-lmtt-10'>draft</span> mode:</p>
<div class='verbatim' id='verbatim-30'>make4ht -m draft filename</div>
<!-- l. 716 -->
<p class='nopar'></p>
<!-- l. 720 -->
<p class='indent'><a id='the-settings-table'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.6</span> <a id='x1-230005.6'></a>The <span class='rm-lmtt-10'>settings</span> table</h4>
<!-- l. 724 -->
<p class='noindent'>It is possible to access the parameters outside commands, file matches and image conversion functions. For example, to convert the document to the <span class='rm-lmtt-10'>OpenDocument Format (ODT)</span>, the following settings can be used. They are based on the <span class='rm-lmtt-10'>oolatex</span> command:</p>
<div class='verbatim' id='verbatim-31'>settings.tex4ht_sty_par = settings.tex4ht_sty_par ..",ooffice"  <br />
settings.tex4ht_par = settings.tex4ht_par .. " ooffice/! -cmozhtf"  <br />
settings.t4ht_par = settings.t4ht_par .. " -cooxtpipes -coo "</div>
<!-- l. 733 -->
<p class='nopar'></p>
<!-- l. 735 -->
<p class='indent'>(Note that it is possible to use the <span class='rm-lmtt-10'>--format odt</span> option which is superior to the previous code. This example is intended just as an illustration)</p>
<!-- l. 739 -->
<p class='indent'>There are some functions to simplify access to the settings:</p>
<!-- l. 741 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmtk-10'>set_settings{parameters}</span></dt>
<dd class='description'>overwrite settings with values from a passed table</dd>
<dt class='description'><span class='rm-lmtk-10'>settings_add{parameters}</span></dt>
<dd class='description'>add values to the current settings</dd>
<dt class='description'><span class='rm-lmtk-10'>filter_settings "filter name" {parameters}</span></dt>
<dd class='description'>set settings for a filter</dd>
<dt class='description'><span class='rm-lmtk-10'>get_filter_settings(name)</span></dt>
<dd class='description'>get settings for a filter</dd>
</dl>
<!-- l. 752 -->
<p class='indent'>For example, it is possible to simplify the sample from the previous code listings:</p>
<div class='verbatim' id='verbatim-32'>settings_add {  <br />
  tex4ht_sty_par =",ooffice",  <br />
  tex4ht_par = " ooffice/! -cmozhtf",  <br />
  t4ht_par = " -cooxtpipes -coo "  <br />
}</div>
<!-- l. 761 -->
<p class='nopar'></p>
<!-- l. 763 -->
<p class='indent'>Settings for filters and extensions can be set using <span class='rm-lmtt-10'>filter_settings</span>:</p>
<div class='verbatim' id='verbatim-33'>filter_settings "test" {  <br />
  hello = "world"  <br />
}</div>
<!-- l. 770 -->
<p class='nopar'></p>
<!-- l. 772 -->
<p class='indent'>These settings can be retrieved in the extensions and filters using the <span class='rm-lmtt-10'>get_filter_settings</span> function:</p>
<div class='verbatim' id='verbatim-34'>function test(input)  <br />
   local options = get_filter_settings("test")  <br />
   print(options.hello)  <br />
   return input  <br />
end</div>
<!-- l. 782 -->
<p class='nopar'></p>
<!-- l. 785 -->
<p class='indent'><a id='default-settings'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.6.1</span> <a id='x1-240005.6.1'></a>Default settings</h5>
<!-- l. 787 -->
<p class='noindent'>The default parameters are the following:</p>
<!-- l. 789 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmtk-10'>htlatex</span></dt>
<dd class='description'>used <span class='TEX'>T<span class='E'>E</span>X</span> engine</dd>
<dt class='description'><span class='rm-lmtk-10'>input</span></dt>
<dd class='description'>output filename</dd>
<dt class='description'><span class='rm-lmtk-10'>tex_file</span></dt>
<dd class='description'>input <span class='TEX'>T<span class='E'>E</span>X</span> file</dd>
<dt class='description'><span class='rm-lmtk-10'>latex_par</span></dt>
<dd class='description'>command line parameters to the <span class='TEX'>T<span class='E'>E</span>X</span> engine</dd>
<dt class='description'><span class='rm-lmtk-10'>packages</span></dt>
<dd class='description'>additional <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> code inserted before <span class='rm-lmtt-10'>\documentclass</span>. Useful for passing options to packages used in the document or to load additional packages.</dd>
<dt class='description'><span class='rm-lmtk-10'>tex4ht_sty_par</span></dt>
<dd class='description'>options for <span class='rm-lmtt-10'>tex4ht.sty</span></dd>
<dt class='description'><span class='rm-lmtk-10'>tex4ht_par</span></dt>
<dd class='description'>command line options for the <span class='rm-lmtt-10'>tex4ht</span> command</dd>
<dt class='description'><span class='rm-lmtk-10'>t4ht_par</span></dt>
<dd class='description'>command line options for the <span class='rm-lmtt-10'>t4ht</span> command</dd>
<dt class='description'><span class='rm-lmtk-10'>outdir</span></dt>
<dd class='description'>the output directory</dd>
<dt class='description'><span class='rm-lmtk-10'>correct_exit</span></dt>
<dd class='description'>expected <span class='rm-lmtt-10'>exit code</span> from the command. The compilation will be terminated if the exit code of the executed command has a different value.</dd>
</dl>
<!-- l. 817 -->
<p class='indent'><a id='configfile'></a></p>
<h3 class='sectionHead'><span class='titlemark'>6</span> <a id='x1-250006'></a>Configuration file</h3>
<!-- l. 819 -->
<p class='noindent'>It is possible to globally modify the build settings using the configuration file. It is a special version of a build file where the global settings can be set.</p>
<!-- l. 823 -->
<p class='indent'>Common tasks for the configuration file can be a declaration of the new commands, loading of the default filters or specification of a default build sequence.</p>
<!-- l. 827 -->
<p class='indent'>One additional functionality not available in the build files are commands for enabling and disabling of extensions.</p>
<!-- l. 831 -->
<p class='indent'><a id='location'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>6.1</span> <a id='x1-260006.1'></a>Location</h4>
<!-- l. 833 -->
<p class='noindent'>The configuration file can be saved either in the <span class='rm-lmtt-10'>$HOME/.config/make4ht/config.lua</span> file, or in the <span class='rm-lmtt-10'>.make4ht</span> file placed in the current directory or it’s parent directories (up to the <span class='rm-lmtt-10'>$HOME</span> directory).</p>
<!-- l. 839 -->
<p class='indent'><a id='additional-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>6.2</span> <a id='x1-270006.2'></a>Additional commands</h4>
<!-- l. 841 -->
<p class='noindent'>There are two additional commands:</p>
<!-- l. 843 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmtk-10'>Make:enable_extension(name)</span></dt>
<dd class='description'>require extension</dd>
<dt class='description'><span class='rm-lmtk-10'>Make:disable_extension(name)</span></dt>
<dd class='description'>disable extension</dd>
</dl>
<!-- l. 851 -->
<p class='indent'><a id='example'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>6.3</span> <a id='x1-280006.3'></a>Example</h4>
<!-- l. 853 -->
<p class='noindent'>The following example of the configuration file adds support for the <span class='rm-lmtt-10'>biber</span> command, requires <span class='rm-lmtt-10'>common_domfilters</span> extension and requires MathML output for math.</p>
<div class='verbatim' id='verbatim-35'>Make:add("biber", "biber ${input}")  <br />
Make:enable_extension "common_domfilters"  <br />
settings_add {  <br />
  tex4ht_sty_par =",mathml"  <br />
}</div>
<!-- l. 863 -->
<p class='nopar'></p>
<!-- l. 866 -->
<p class='indent'><a id='development'></a></p>
<h3 class='sectionHead'><span class='titlemark'>7</span> <a id='x1-290007'></a>Development</h3>
<!-- l. 869 -->
<p class='noindent'><a id='custom-filters'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.1</span> <a id='x1-300007.1'></a>Custom filters</h4>
<!-- l. 872 -->
<p class='noindent'><a id='new-extensions'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.2</span> <a id='x1-310007.2'></a>New extensions</h4>
<!-- l. 876 -->
<p class='noindent'><a id='how-to-add-new-output-format'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.3</span> <a id='x1-320007.3'></a>How to add new output format</h4>
<!-- l. 880 -->
<p class='noindent'><a id='list-of-available-settings-for-filters-and-extensions.'></a></p>
<h3 class='sectionHead'><span class='titlemark'>8</span> <a id='x1-330008'></a>List of available settings for filters and extensions.</h3>
<!-- l. 882 -->
<p class='noindent'>These settings may be set using <span class='rm-lmtt-10'>filter_settings</span> function in a build file or in the <span class='rm-lmtt-10'>make4ht</span> configuration file.</p>
<!-- l. 887 -->
<p class='indent'><a id='the-htlatex-command'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.1</span> <a id='x1-340008.1'></a>The <span class='rm-lmtt-10'>htlatex</span> command</h4>
<!-- l. 889 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmtk-10'>interaction</span></dt>
<dd class='description'>interaction mode for the <span class='TEX'>T<span class='E'>E</span>X</span> engine. The default value is <span class='rm-lmtt-10'>batchmode</span> to suppress user input on compilation errors. It also suppresses most of the <span class='TEX'>T<span class='E'>E</span>X</span>  compilation log output. Use the <span class='rm-lmtt-10'>errorstopmode</span> for the default behaviour.</dd>
</dl>
<!-- l. 899 -->
<p class='noindent'><a id='the-xindy-command'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.2</span> <a id='x1-350008.2'></a>The <span class='rm-lmtt-10'>xindy</span> command</h4>
<!-- l. 901 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>encoding</span></dt>
<dd class='description'>text encoding of the <span class='rm-lmtt-10'>.idx</span> file. Default value is <span class='rm-lmtt-10'>utf8</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>language</span></dt>
<dd class='description'>index language. Default language is English.</dd>
<dt class='description'><span class='rm-lmbx-10'>modules</span></dt>
<dd class='description'>additional <span class='rm-lmtt-10'>Xindy</span> modules.</dd>
</dl>
<!-- l. 912 -->
<p class='noindent'><a id='the-tidy-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.3</span> <a id='x1-360008.3'></a>The <span class='rm-lmtt-10'>tidy</span> extension</h4>
<!-- l. 914 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>options</span></dt>
<dd class='description'>command line options for the <span class='rm-lmtt-10'>tidy</span> command. Default value is <span class='rm-lmtt-10'>-m -utf8 -w 512 -q</span>.</dd>
</dl>
<!-- l. 922 -->
<p class='noindent'><a id='the-collapsetoc-dom-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.4</span> <a id='x1-370008.4'></a>The <span class='rm-lmtt-10'>collapsetoc</span> dom filter</h4>
<!-- l. 924 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmtk-10'>toc_query</span></dt>
<dd class='description'>CSS selector for selecting the table of contents container.</dd>
<dt class='description'><span class='rm-lmtk-10'>title_query</span></dt>
<dd class='description'>CSS selector for selecting all elements that contain the section ID attribute.</dd>
<dt class='description'><span class='rm-lmtk-10'>toc_levels</span></dt>
<dd class='description'>table containing a hierarchy of classes used in TOC</dd>
</dl>
<!-- l. 934 -->
<p class='noindent'>Default values:</p>
<div class='verbatim' id='verbatim-36'>filter_settings "collapsetoc" {  <br />
  toc_query = ".tableofcontents",  <br />
  title_query = ".partHead a, .chapterHead a, .sectionHead a, .subsectionHead a",  <br />
  toc_levels = {"partToc", "chapterToc", "sectionToc", "subsectionToc", "subsubsectionToc"}  <br />
}</div>
<!-- l. 942 -->
<p class='nopar'></p>
<!-- l. 946 -->
<p class='indent'><a id='the-fixinlines-dom-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.5</span> <a id='x1-380008.5'></a>The <span class='rm-lmtt-10'>fixinlines</span> dom filter</h4>
<!-- l. 948 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>inline_elements</span></dt>
<dd class='description'>table of inline elements that shouldn’t be direct descendants of the <span class='rm-lmtt-10'>body</span> element. The element names should be table keys, the values should be true.</dd>
</dl>
<!-- l. 955 -->
<p class='noindent'>Example</p>
<div class='verbatim' id='verbatim-37'>filter_settings "fixinlines" {inline_elements = {a = true, b = true}}</div>
<!-- l. 959 -->
<p class='nopar'></p>
<!-- l. 963 -->
<p class='indent'><a id='the-joincharacters-dom-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.6</span> <a id='x1-390008.6'></a>The <span class='rm-lmtt-10'>joincharacters</span> dom filter</h4>
<!-- l. 965 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>charclasses</span></dt>
<dd class='description'>table of elements that should be concatenated when two or more of such elements with the same value of the <span class='rm-lmtt-10'>class</span> attribute are placed one after another.</dd>
</dl>
<!-- l. 972 -->
<p class='noindent'>Example</p>
<div class='verbatim' id='verbatim-38'>filter_settings "joincharacters" { charclasses = { span=true, mn = true}}</div>
<!-- l. 976 -->
<p class='nopar'></p>
<!-- l. 980 -->
<p class='indent'><a id='mathjaxsettings'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.7</span> <a id='x1-400008.7'></a>The <span class='rm-lmtt-10'>mathjaxnode</span> filter</h4>
<!-- l. 982 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>options</span></dt>
<dd class='description'>command line options for the <span class='rm-lmtt-10'>mjpage</span> command. Default value is <span class='rm-lmtt-10'>--output CommonHTML</span></dd>
</dl>
<!-- l. 988 -->
<p class='noindent'>Example</p>
<div class='verbatim' id='verbatim-39'>filter_settings "mathjaxnode" {  <br />
  options="--output SVG --font Neo-Euler"  <br />
}</div>
<!-- l. 994 -->
<p class='nopar'></p>
<!-- l. 996 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>cssfilename</span></dt>
<dd class='description'><span class='rm-lmtt-10'>mjpage</span> puts some CSS code into the HTML pages. <span class='rm-lmtt-10'>mathjaxnode</span> extracts this information and saves it to a standalone CSS file. Default CSS filename is <span class='rm-lmtt-10'>mathjax-chtml.css</span></dd>
<dt class='description'><span class='rm-lmbx-10'>fontdir</span></dt>
<dd class='description'>directory with MathJax font files. This option enables use of local fonts, which is useful in the conversion to ePub, for example. The font directory should be sub-directory of the current directory. Only TeX font is supported at the moment.</dd>
</dl>
<!-- l. 1008 -->
<p class='indent'>Example</p>
<div class='verbatim' id='verbatim-40'>filter_settings "mathjaxnode" {  <br />
  fontdir="fonts/TeX/woff/"  <br />
}</div>
<!-- l. 1014 -->
<p class='nopar'></p>
<!-- l. 1018 -->
<p class='indent'><a id='the-staticsite-filter-and-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.8</span> <a id='x1-410008.8'></a>The <span class='rm-lmtt-10'>staticsite</span> filter and extension</h4>
<!-- l. 1020 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>site_root</span></dt>
<dd class='description'>directory where generated files should be copied.</dd>
<dt class='description'><span class='rm-lmbx-10'>map</span></dt>
<dd class='description'>a hash table where keys contain patterns that match filenames and values contain destination directory for the matched files. The destination directories are relative to the <span class='rm-lmtt-10'>site_root</span> (it is possible to use <span class='rm-lmtt-10'>..</span> to switch to a parent directory).</dd>
<dt class='description'><span class='rm-lmbx-10'>file_pattern</span></dt>
<dd class='description'>a pattern used for filename generation. It is possible to use string templates and format strings for <span class='rm-lmtt-10'>os.date</span> function. The default pattern <span class='rm-lmtt-10'>%Y-%m-%d-${input}</span> creates names in the form of <span class='rm-lmtt-10'>YYYY-MM-DD-file_name</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>header</span></dt>
<dd class='description'>table with variables to be set in the YAML header in HTML files. If the table value is a function, it is executed with current parameters and HTML page DOM object as arguments.</dd>
</dl>
<!-- l. 1039 -->
<p class='noindent'>Example:</p>
<div class='verbatim' id='verbatim-41'>local outdir = os.getenv "blog_root"  <br />
filter_settings "staticsite" {  <br />
  site_root = outdir,  <br />
  map = {  <br />
    [".css$"] = "../css/"  <br />
  },  <br />
  header = {  <br />
     layout="post",  <br />
     date = function(parameters, dom)  <br />
       return os.date("!%Y-%m-%d %T", parameters.time)  <br />
     end  <br />
  }  <br />
}</div>
<!-- l. 1056 -->
<p class='nopar'></p>
<!-- l. 1060 -->
<p class='indent'><a id='the-dvisvgm_hashes-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.9</span> <a id='x1-420008.9'></a>The <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension</h4>
<!-- l. 1062 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>options</span></dt>
<dd class='description'>command line options for Dvisvgm. The default value is <span class='rm-lmtt-10'>-n --exact -c 1.15,1.15</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>cpu_cnt</span></dt>
<dd class='description'>a number of processor cores used for the conversion. The extension tries to detect the available cores automatically by default.</dd>
<dt class='description'><span class='rm-lmbx-10'>parallel_size</span></dt>
<dd class='description'>a number of pages used in each Dvisvgm call. The extension detects changed pages in the DVI file and constructs multiple calls to Dvisvgm with only changed pages.</dd>
<dt class='description'><span class='rm-lmbx-10'>scale</span></dt>
<dd class='description'>SVG scaling.</dd>
</dl>
<!-- l. 1079 -->
<p class='noindent'><a id='the-odttemplate-filter-and-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.10</span> <a id='x1-430008.10'></a>The <span class='rm-lmtt-10'>odttemplate</span> filter and extension</h4>
<!-- l. 1081 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>template</span></dt>
<dd class='description'>filename of the template <span class='rm-lmtt-10'>ODT</span> file</dd>
</dl>
<!-- l. 1086 -->
<p class='noindent'><span class='rm-lmtt-10'>odttemplate</span> can also get the template filename from the <span class='rm-lmtt-10'>odttemplate</span> option from <span class='rm-lmtt-10'>tex4ht_sty_par</span> parameter. It can be set using the following command line call:</p>
<div class='verbatim' id='verbatim-42'> make4ht -f odt+odttemplate filename.tex "odttemplate=template.odt"</div>
<!-- l. 1092 -->
<p class='nopar'></p>
<!-- l. 1096 -->
<p class='indent'><a id='the-aeneas-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.11</span> <a id='x1-440008.11'></a>The <span class='rm-lmtt-10'>aeneas</span> filter</h4>
<!-- l. 1098 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>skip_elements</span></dt>
<dd class='description'>List of CSS selectors that match elements that shouldn’t be processed. Default value: <span class='rm-lmtt-10'>{ "math", "svg"}</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>id_prefix</span></dt>
<dd class='description'>prefix used in the ID attribute forming.</dd>
<dt class='description'><span class='rm-lmbx-10'>sentence_match</span></dt>
<dd class='description'>Lua pattern used to match a sentence. Default value: <span class='rm-lmtt-10'>"([^%.^%?^!]*)([%.%?!]?)"</span>.</dd>
</dl>
<!-- l. 1111 -->
<p class='noindent'><a id='the-make4ht-aeneas-config-package'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.12</span> <a id='x1-450008.12'></a>The <span class='rm-lmtt-10'>make4ht-aeneas-config</span> package</h4>
<!-- l. 1113 -->
<p class='noindent'>Companion for the <span class='rm-lmtt-10'>aeneas</span> DOM filter is the <span class='rm-lmtt-10'>make4ht-aeneas-config</span> plugin. It can be used to write the Aeneas configuration file or execute Aeneas on the generated HTML files.</p>
<!-- l. 1117 -->
<p class='indent'>Available functions:</p>
<!-- l. 1119 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>write_job(parameters)</span></dt>
<dd class='description'>write Aenas job configuration to <span class='rm-lmtt-10'>config.xml</span> file. See the <a href='https://www.readbeyond.it/aeneas/docs/clitutorial.html#processing-jobs'>Aeneas documentation</a> for more information about jobs.</dd>
<dt class='description'><span class='rm-lmbx-10'>execute(parameters)</span></dt>
<dd class='description'>execute Aeneas.</dd>
<dt class='description'><span class='rm-lmbx-10'>process_files(parameters)</span></dt>
<dd class='description'>process the audio and generated subtitle files.</dd>
</dl>
<!-- l. 1130 -->
<p class='indent'>By default, a <span class='rm-lmtt-10'>SMIL</span> file is created. It is assumed that there is an audio file in the <span class='rm-lmtt-10'>mp3</span> format, named as the <span class='TEX'>T<span class='E'>E</span>X</span> file. It is possible to use different formats and filenames using mapping.</p>
<!-- l. 1134 -->
<p class='indent'>The configuration options can be passed directly to the functions or set using <span class='rm-lmtt-10'>filter_settings "aeneas-config" {parameters}</span> function.</p>
<!-- l. 1139 -->
<p class='indent'><a id='available-parameters'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>8.12.1</span> <a id='x1-460008.12.1'></a>Available parameters</h5>
<!-- l. 1141 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>lang</span></dt>
<dd class='description'>document language. It is interfered from the HTML file, so it is not necessary to set it.</dd>
<dt class='description'><span class='rm-lmbx-10'>map</span></dt>
<dd class='description'>mapping between HTML, audio and subtitle files. More info below.</dd>
<dt class='description'><span class='rm-lmbx-10'>text_type</span></dt>
<dd class='description'>type of input. The <span class='rm-lmtt-10'>aeneas</span> DOM filter produces <span class='rm-lmtt-10'>unparsed</span> text type.</dd>
<dt class='description'><span class='rm-lmbx-10'>id_sort</span></dt>
<dd class='description'>sorting of id attributes. The default value is <span class='rm-lmtt-10'>numeric</span>.</dd>
<dt class='description'><span class='rm-lmbx-10'>id_regex</span></dt>
<dd class='description'>regular expression to parse the id attributes.</dd>
<dt class='description'><span class='rm-lmbx-10'>sub_format</span></dt>
<dd class='description'>generated subtitle format. The default value is <span class='rm-lmtt-10'>smil</span>.</dd>
</dl>
<!-- l. 1160 -->
<p class='noindent'><a id='additional-parameters-for-the-job-configuration-file'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>8.12.2</span> <a id='x1-470008.12.2'></a>Additional parameters for the job configuration file</h5>
<ul class='itemize1'>
<li class='itemize'>description</li>
<li class='itemize'>prefix</li>
<li class='itemize'>config_name</li>
<li class='itemize'>keep_config</li>
</ul>
<!-- l. 1174 -->
<p class='noindent'>It is possible to generate multiple HTML files from the <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> source. For example, <span class='rm-lmtt-10'>tex4ebook</span> generates a separate file for each chapter or section. It is possible to set options for each HTML file, in particular names of the corresponding audio files. This mapping is done using the <span class='rm-lmtt-10'>map</span> parameter.</p>
<!-- l. 1180 -->
<p class='indent'>Example:</p>
<div class='verbatim' id='verbatim-43'>filter_settings "aeneas-config" {  <br />
  map = {  <br />
    ["sampleli1.html"] = {audio_file="sample.mp3"},  <br />
    ["sample.html"] = false  <br />
  }  <br />
}</div>
<!-- l. 1189 -->
<p class='nopar'></p>
<!-- l. 1191 -->
<p class='indent'>Table keys are the configured filenames. It is necessary to insert them as <span class='rm-lmtt-10'>["filename.html"]</span>, because of Lua syntax rules.</p>
<!-- l. 1194 -->
<p class='indent'>This example maps audio file <span class='rm-lmtt-10'>sample.mp3</span> to a section subpage. The main HTML file, which may contain title and table of contents doesn’t have a corresponding audio file.</p>
<!-- l. 1198 -->
<p class='indent'>Filenames of the subfiles correspond to the chapter numbers, so they are not stable when a new chapter is added. It is possible to request filenames derived from the chapter titles using the <span class='rm-lmtt-10'>sec-filename</span> option for <span class='rm-lmtt-10'>tex4ht.sty</span>.</p>
<!-- l. 1205 -->
<p class='indent'><a id='available-map-options'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>8.12.3</span> <a id='x1-480008.12.3'></a>Available <span class='rm-lmtt-10'>map</span> options</h5>
<!-- l. 1207 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><span class='rm-lmbx-10'>audio_file</span></dt>
<dd class='description'>the corresponding audio file</dd>
<dt class='description'><span class='rm-lmbx-10'>sub_file</span></dt>
<dd class='description'>name of the generated subtitle file</dd>
</dl>
<!-- l. 1214 -->
<p class='noindent'>The following options are the same as their counterparts from the main parameters table and generally, don’t need to be set:</p>
<ul class='itemize1'>
<li class='itemize'>prefix</li>
<li class='itemize'>file_desc</li>
<li class='itemize'>file_id</li>
<li class='itemize'>text_type</li>
<li class='itemize'>id_sort</li>
<li class='itemize'>id_prefix</li>
<li class='itemize'>sub_format</li>
</ul>
<!-- l. 1236 -->
<p class='indent'><a id='full-example'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>8.12.4</span> <a id='x1-490008.12.4'></a>Full example</h5>
<div class='verbatim' id='verbatim-44'>local domfilter = require "make4ht-domfilter"  <br />
local aeneas_config = require "make4ht-aeneas-config"  <br />
filter_settings "aeneas-config" {  <br />
  map = {  <br />
    ["krecekli1.xhtml"] = {audio_file="krecek.mp3"},  <br />
    ["krecek.xhtml"] = false  <br />
  }  <br />
}  <br />
local process = domfilter {"aeneas"}  <br />
Make:match("html$", process)  <br />
if mode == "draft" then  <br />
  aeneas_config.process_files {}  <br />
else  <br />
  aeneas_config.execute {}  <br />
end</div>
<!-- l. 1257 -->
<p class='nopar'></p>
<!-- l. 1260 -->
<p class='indent'><a id='troubleshooting'></a></p>
<h3 class='sectionHead'><span class='titlemark'>9</span> <a id='x1-500009'></a>Troubleshooting</h3>
<!-- l. 1265 -->
<p class='noindent'><a id='incorrect-handling-of-command-line-arguments-for-tex4ht-t4ht-or-latex'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>9.1</span> <a id='x1-510009.1'></a>Incorrect handling of command line arguments for <span class='rm-lmtt-10'>tex4ht</span>, <span class='rm-lmtt-10'>t4ht</span> or <span class='rm-lmtt-10'>latex</span></h4>
<!-- l. 1267 -->
<p class='noindent'>Sometimes, you may get a similar error:</p>
<div class='verbatim' id='verbatim-45'>make4ht:unrecognized parameter: i</div>
<!-- l. 1271 -->
<p class='nopar'></p>
<!-- l. 1273 -->
<p class='indent'>It may be caused by a following <span class='rm-lmtt-10'>make4ht</span> invocation:</p>
<div class='verbatim' id='verbatim-46'>$ make4ht hello.tex "customcfg,charset=utf-8" "-cunihtf -utf8" -d foo</div>
<!-- l. 1277 -->
<p class='nopar'></p>
<!-- l. 1279 -->
<p class='indent'>The command line option parser is confused by mixing options for <span class='rm-lmtt-10'>make4ht</span> and <span class='TEX'>T<span class='E'>E</span>X</span>4ht in this case. It tries to interpret the <span class='rm-lmtt-10'>-cunihtf -utf8</span>, which are options for the <span class='rm-lmtt-10'>tex4ht</span> command, as <span class='rm-lmtt-10'>make4ht</span> options. To fix that, try to move the <span class='rm-lmtt-10'>-d foo</span> directly after the <span class='rm-lmtt-10'>make4ht</span> command:</p>
<div class='verbatim' id='verbatim-47'>$ make4ht -d foo hello.tex "customcfg,charset=utf-8" "-cunihtf -utf8"</div>
<!-- l. 1287 -->
<p class='nopar'></p>
<!-- l. 1289 -->
<p class='indent'>Another option is to add a space before the <span class='rm-lmtt-10'>tex4ht</span> options:</p>
<div class='verbatim' id='verbatim-48'>$ make4ht hello.tex "customcfg,charset=utf-8" " -cunihtf -utf8" -d foo</div>
<!-- l. 1293 -->
<p class='nopar'></p>
<!-- l. 1295 -->
<p class='indent'>The former way is preferable, though.</p>
<!-- l. 1299 -->
<p class='indent'><a id='filenames-containing-spaces'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>9.2</span> <a id='x1-520009.2'></a>Filenames containing spaces</h4>
<!-- l. 1301 -->
<p class='noindent'><span class='rm-lmtt-10'>tex4ht</span> command cannot handle filenames containing spaces. to fix this issue, <span class='rm-lmtt-10'>make4ht</span> replaces spaces in the input filenames with underscores. The generated XML filenames use underscores instead of spaces as well.</p>
<!-- l. 1308 -->
<p class='indent'><a id='filenames-containing-non-ascii-characters'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>9.3</span> <a id='x1-530009.3'></a>Filenames containing non-ASCII characters</h4>
<!-- l. 1310 -->
<p class='noindent'>The <span class='rm-lmtt-10'>odt</span> output doesn’t support accented filenames, it is best to stick to ASCII characters in filenames.</p>
<!-- l. 1314 -->
<p class='indent'><a id='license'></a></p>
<h3 class='sectionHead'><span class='titlemark'>10</span> <a id='x1-5400010'></a>License</h3>
<!-- l. 1316 -->
<p class='noindent'>Permission is granted to copy, distribute and/or modify this software under the terms of the LaTeX Project Public License, version 1.3.</p>
<!-- l. 2 -->
<p class='indent'><a id='changelog'></a></p>
<h3 class='sectionHead'><span class='titlemark'>11</span> <a id='x1-5500011'></a>Changelog</h3>
<ul class='itemize1'>
<li class='itemize'>2019/10/11
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>xindy</span> settings.</li>
<li class='itemize'>added simple regular expression to detect errors in the log file, because log parsing can be slow.</li>
</ul>
</li>
<li class='itemize'>2019/10/09
<ul class='itemize2'>
<li class='itemize'>added the <span class='rm-lmtt-10'>interaction</span> parameter for the <span class='rm-lmtt-10'>htlatex</span> command. The default value is <span class='rm-lmtt-10'>batchmode</span> to suppress the user input on errors, and to suppress full log output to the terminal.</li>
<li class='itemize'>added the <span class='rm-lmtt-10'>make4ht-errorlogparser</span> module. It is used to parse errors in the <span class='rm-lmtt-10'>htlatex</span> run unless <span class='rm-lmtt-10'>interaction</span> is set to <span class='rm-lmtt-10'>errorstopmode</span>.</li>
</ul>
</li>
<li class='itemize'>2019/10/08
<ul class='itemize2'>
<li class='itemize'>set up Github Actions pipeline to compile the documentation to HTML and publish it at https://www.kodymirus.cz/make4ht/make4ht-doc.html.</li>
</ul>
</li>
<li class='itemize'>2019/10/07
<ul class='itemize2'>
<li class='itemize'>don’t move the <span class='rm-lmtt-10'>common_domfilters</span> extension to the first place in the file matches pipeline. We may want to run <span class='rm-lmtt-10'>tidy</span> or regex filters first, to fix XML validation errors.</li>
</ul>
</li>
<li class='itemize'>2019/10/04
<ul class='itemize2'>
<li class='itemize'>added HTML documentation.</li>
</ul>
</li>
<li class='itemize'>2019/09/27
<ul class='itemize2'>
<li class='itemize'>don’t convert Latin 1 entities to Unicode in the <span class='rm-lmtt-10'>entities_to_unicode</span> extension.</li>
</ul>
</li>
<li class='itemize'>2019/09/20
<ul class='itemize2'>
<li class='itemize'>fixed bugs in the temporary directory handling for the ODT output.</li>
</ul>
</li>
<li class='itemize'>2019/09/13
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>preprocess_input</span> extension. It enables compilation of formats supported by <a href='https://yihui.name/knitr/'>Knitr</a> (<span class='rm-lmtt-10'>.Rnw</span>, <span class='rm-lmtt-10'>.Rtex</span>, <span class='rm-lmtt-10'>.Rmd</span>, <span class='rm-lmtt-10'>.Rrst</span>) and also Markdown and reStructuredText formats.</li>
</ul>
</li>
<li class='itemize'>2019/09/12
<ul class='itemize2'>
<li class='itemize'>added support for the ODT files in <span class='rm-lmtt-10'>common_domfilters</span> extension.</li>
<li class='itemize'>renamed <span class='rm-lmtt-10'>charclases</span> option for the <span class='rm-lmtt-10'>joincharacters</span> DOM filter to <span class='rm-lmtt-10'>charclasses</span>.</li>
<li class='itemize'>don’t execute the <span class='rm-lmtt-10'>fixentities</span> filter before Xtpipes, it makes no sense.</li>
</ul>
</li>
<li class='itemize'>2019/09/11
<ul class='itemize2'>
<li class='itemize'>added support for Biber in the build files.</li>
</ul>
</li>
<li class='itemize'>2019/08/28
<ul class='itemize2'>
<li class='itemize'>added support for input from <span class='rm-lmtt-10'>stdin</span>.</li>
</ul>
</li>
<li class='itemize'>2019/08/27
<ul class='itemize2'>
<li class='itemize'>fixed <span class='rm-lmtt-10'>-jobname</span> detection regex.</li>
<li class='itemize'>added function <span class='rm-lmtt-10'>handle_jobname</span>.</li>
<li class='itemize'>added the <span class='rm-lmtt-10'>--jobname</span> command line option.</li>
</ul>
</li>
<li class='itemize'>2019/08/26
<ul class='itemize2'>
<li class='itemize'>quote file names and paths in <span class='rm-lmtt-10'>xtpipes</span> and <span class='rm-lmtt-10'>tidy</span> invocation.</li>
</ul>
</li>
<li class='itemize'>2019/08/25
<ul class='itemize2'>
<li class='itemize'>the issue tracker link in the help message is now configurable.</li>
<li class='itemize'>fixed bug in the XeTeX handling: the <span class='rm-lmtt-10'>.xdv</span> argument for <span class='rm-lmtt-10'>tex4ht</span> wasn’t used if command line arguments for <span class='rm-lmtt-10'>tex4ht</span> were present.</li>
</ul>
</li>
<li class='itemize'>2019/07/03
<ul class='itemize2'>
<li class='itemize'>new DOM filter: <span class='rm-lmtt-10'>odtpartable</span>. It fixes tables nested in paragraphs in the ODT format.</li>
</ul>
</li>
<li class='itemize'>2019/06/13
<ul class='itemize2'>
<li class='itemize'>new DOM extension: <span class='rm-lmtt-10'>collapsetoc</span>.</li>
</ul>
</li>
<li class='itemize'>2019/05/29
<ul class='itemize2'>
<li class='itemize'>new module: <span class='rm-lmtt-10'>make4ht-indexing</span> for working with index files.</li>
</ul>
</li>
<li class='itemize'>2019/05/24
<ul class='itemize2'>
<li class='itemize'>version 0.2g released</li>
<li class='itemize'>fixed failing <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension on Windows.</li>
</ul>
</li>
<li class='itemize'>2019/05/02
<ul class='itemize2'>
<li class='itemize'>fixed infinite loop bug in the <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension.</li>
</ul>
</li>
<li class='itemize'>2019/04/09
<ul class='itemize2'>
<li class='itemize'><span class='rm-lmtt-10'>make4ht-joincolors</span> fix: remove the hash character from the color name. This caused issues with colors specified in the hexadecimal format.</li>
</ul>
</li>
<li class='itemize'>2019/04/02
<ul class='itemize2'>
<li class='itemize'><span class='rm-lmtt-10'>dvisvgm_hashes</span> fix: update also the lgfile.images table with generated filenames, in order to support tex4ebook</li>
</ul>
</li>
<li class='itemize'>2019/04/01
<ul class='itemize2'>
<li class='itemize'>fixed bug in <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension: didn’t check for table index existence in string concenation</li>
</ul>
</li>
<li class='itemize'>2019/03/21
<ul class='itemize2'>
<li class='itemize'>version 0.2f released</li>
</ul>
</li>
<li class='itemize'>2019/03/15
<ul class='itemize2'>
<li class='itemize'>check for the image dimensions existence in the <span class='rm-lmtt-10'>odtimagesize</span> domfilter.</li>
</ul>
</li>
<li class='itemize'>2019/03/13
<ul class='itemize2'>
<li class='itemize'>don’t use <span class='rm-lmtt-10'>odtimagesize</span> domfilter in the <span class='rm-lmtt-10'>ODT</span> format, the issue it fixes had been resolved in <span class='rm-lmtt-10'>tex4ht</span>.</li>
</ul>
</li>
<li class='itemize'>2019/03/08
<ul class='itemize2'>
<li class='itemize'>use <span class='rm-lmtt-10'>%USERPROFILE</span> for home dir search on Windows.</li>
</ul>
</li>
<li class='itemize'>2019/01/28
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>joincolors</span> domfilter and <span class='rm-lmtt-10'>join_colors</span> extension. It can join CSS rules created for the LaTeX colors and update the HTML file.</li>
</ul>
</li>
<li class='itemize'>2019/01/22
<ul class='itemize2'>
<li class='itemize'>version 0.2e released</li>
<li class='itemize'>updated the <span class='rm-lmtt-10'>odttemplate</span> filter. It will use styles from the generated ODT file that haven’t been present in the template file.</li>
</ul>
</li>
<li class='itemize'>2019/01/10
<ul class='itemize2'>
<li class='itemize'>version 0.2d released</li>
</ul>
</li>
<li class='itemize'>2019/01/05
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>docbook</span> and <span class='rm-lmtt-10'>tei</span> output formats.</li>
</ul>
</li>
<li class='itemize'>2018/12/19
<ul class='itemize2'>
<li class='itemize'>new library: <span class='rm-lmtt-10'>make4ht-xtpipes.lua</span>. It contains code for xtpipes handling.</li>
<li class='itemize'>moved Xtpipes handling code from <span class='rm-lmtt-10'>formats/odt.lua</span>.</li>
</ul>
</li>
<li class='itemize'>2018/12/18
<ul class='itemize2'>
<li class='itemize'>new filter: <span class='rm-lmtt-10'>odttemplate</span>. It can be used for replacing style in a generated <span class='rm-lmtt-10'>ODT</span> file by a style from another existing <span class='rm-lmtt-10'>ODT</span> file.</li>
<li class='itemize'>new extension: <span class='rm-lmtt-10'>odttemplate</span>. Companioning extension for filter with the same name.</li>
<li class='itemize'>fixed bug in <span class='rm-lmtt-10'>make4ht-filters.lua</span>: the parameters table haven’t been passed to filters.</li>
</ul>
</li>
<li class='itemize'>2018/12/17
<ul class='itemize2'>
<li class='itemize'>fixed extension handling. The disabling from the command line didn’t take precedence over extensions enabled in the config file. Extensions also could be executed multiple times.</li>
</ul>
</li>
<li class='itemize'>2018/11/08
<ul class='itemize2'>
<li class='itemize'>removed replacing newlines by blank strings in the <span class='rm-lmtt-10'>joincharacters</span> domfilter. The issue it fixed doesn’t seem to exist anymore, and it ate spaces sometimes.</li>
</ul>
</li>
<li class='itemize'>2018/11/01
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>t4htlinks</span> domfilter</li>
<li class='itemize'>fixed the <span class='rm-lmtt-10'>xtpipes</span> and <span class='rm-lmtt-10'>filters</span> execution order in the <span class='rm-lmtt-10'>ODT</span> format</li>
</ul>
</li>
<li class='itemize'>2018/10/26
<ul class='itemize2'>
<li class='itemize'>fixed ODT generation for files that contains special characters for Lua string patterns</li>
<li class='itemize'>replace non-breaking spaces with entities. It caused issues in LO</li>
</ul>
</li>
<li class='itemize'>2018/10/18
<ul class='itemize2'>
<li class='itemize'>fixed the executable installation</li>
</ul>
</li>
<li class='itemize'>2018/09/16
<ul class='itemize2'>
<li class='itemize'>added the <span class='rm-lmtt-10'>scale</span> option for <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/09/14
<ul class='itemize2'>
<li class='itemize'>require the <span class='rm-lmtt-10'>-dvi</span> option with <span class='rm-lmtt-10'>latexmk_build</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/09/12
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>xindy</span> command for the build file</li>
</ul>
</li>
<li class='itemize'>2018/09/03
<ul class='itemize2'>
<li class='itemize'>expanded the <span class='rm-lmtt-10'>--help</span> option</li>
</ul>
</li>
<li class='itemize'>2018/08/27
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>odtimagesize</span> domfilter</li>
<li class='itemize'>load <span class='rm-lmtt-10'>odtimagesize</span> by default in the ODT format</li>
</ul>
</li>
<li class='itemize'>2018/08/23
<ul class='itemize2'>
<li class='itemize'>released version 0.2c</li>
</ul>
</li>
<li class='itemize'>2018/08/21
<ul class='itemize2'>
<li class='itemize'>added processor core detection on Windows</li>
<li class='itemize'>make processor number configurable</li>
<li class='itemize'>updated the documentation.</li>
</ul>
</li>
<li class='itemize'>2018/08/20
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>dvisvgm_hashes</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/07/03
<ul class='itemize2'>
<li class='itemize'>create the <span class='rm-lmtt-10'>mimetype</span> file to achieve the ODT file validity</li>
</ul>
</li>
<li class='itemize'>2018/07/02
<ul class='itemize2'>
<li class='itemize'>disabled conversion of XML entities for &amp;, &lt; and &gt; characters back to Unicode, because it breaks XML validity</li>
</ul>
</li>
<li class='itemize'>2018/06/27
<ul class='itemize2'>
<li class='itemize'>fixed root dir detection</li>
</ul>
</li>
<li class='itemize'>2018/06/26
<ul class='itemize2'>
<li class='itemize'>added code for detection of TeX distribution root for Miktex and TL</li>
</ul>
</li>
<li class='itemize'>2018/06/25
<ul class='itemize2'>
<li class='itemize'>moved call to <span class='rm-lmtt-10'>xtpipes</span> from <span class='rm-lmtt-10'>t4ht</span> to the <span class='rm-lmtt-10'>ODT</span> format drives. This should fix issues with path expansion in <span class='rm-lmtt-10'>tex4ht.env</span> in TeX distributions.</li>
</ul>
</li>
<li class='itemize'>2018/06/22
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>mkutils.find_zip</span> function. It detects <span class='rm-lmtt-10'>zip</span> or <span class='rm-lmtt-10'>miktex-zip</span> executables</li>
</ul>
</li>
<li class='itemize'>2018/06/19
<ul class='itemize2'>
<li class='itemize'>added new filter: <span class='rm-lmtt-10'>entities-to-unicode</span>. It converts XML entites for Unicode characters back to Unicode.</li>
<li class='itemize'>execute <span class='rm-lmtt-10'>entities-to-unicode</span> filter on text and math files in the ODT output.</li>
</ul>
</li>
<li class='itemize'>2018/06/12
<ul class='itemize2'>
<li class='itemize'>added support for direct <span class='rm-lmtt-10'>ODT</span> file packing</li>
</ul>
</li>
<li class='itemize'>2018/06/11
<ul class='itemize2'>
<li class='itemize'>new function available for formats, <span class='rm-lmtt-10'>format.modify_build</span></li>
<li class='itemize'>function <span class='rm-lmtt-10'>mkutils.delete_dir</span> for directory removal</li>
<li class='itemize'>function <span class='rm-lmtt-10'>mkutils.mv</span> for file moving</li>
<li class='itemize'>started on packing of the <span class='rm-lmtt-10'>ODT</span> files directly by the format, instead of <span class='rm-lmtt-10'>t4ht</span></li>
</ul>
</li>
<li class='itemize'>2018/06/08
<ul class='itemize2'>
<li class='itemize'>added support for filenames containing spaces</li>
<li class='itemize'>added support for filenames containing non-ascii characters</li>
<li class='itemize'>don’t require sudo for the installation, let the user to install symbolic links to <span class='rm-lmtt-10'>$PATH</span></li>
</ul>
</li>
<li class='itemize'>2018/05/03
<ul class='itemize2'>
<li class='itemize'>released version <span class='rm-lmtt-10'>0.2b</span></li>
<li class='itemize'>bug fix: use only <span class='rm-lmtt-10'>load</span> function in <span class='rm-lmtt-10'>Make:run</span>, in order to support a local environment.</li>
</ul>
</li>
<li class='itemize'>2018/05/03
<ul class='itemize2'>
<li class='itemize'>released version <span class='rm-lmtt-10'>0.2a</span></li>
<li class='itemize'>renamed <span class='rm-lmtt-10'>latexmk</span> extension to <span class='rm-lmtt-10'>latexmk_build</span>, due to clash in TL</li>
</ul>
</li>
<li class='itemize'>2018/04/18
<ul class='itemize2'>
<li class='itemize'><span class='rm-lmtt-10'>staticsite</span> extension:
<ul class='itemize3'>
<li class='itemize'>make YAML header configurable</li>
<li class='itemize'>set the <span class='rm-lmtt-10'>time</span> and <span class='rm-lmtt-10'>updated</span> headers</li>
</ul>
</li>
<li class='itemize'>don’t override existing tables in <span class='rm-lmtt-10'>filter_settings</span></li>
</ul>
</li>
<li class='itemize'>2018/04/17
<ul class='itemize2'>
<li class='itemize'>done first version of <span class='rm-lmtt-10'>staticsite</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/04/16
<ul class='itemize2'>
<li class='itemize'>check for Git repo in the Makefile, don’t run Git commands outside of repo</li>
</ul>
</li>
<li class='itemize'>2018/04/15
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>staticsite</span> filter</li>
<li class='itemize'>working on <span class='rm-lmtt-10'>staticsite</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/04/13
<ul class='itemize2'>
<li class='itemize'>use <span class='rm-lmtt-10'>ipairs</span> instead of <span class='rm-lmtt-10'>pairs</span> to traverse lists of images and image match functions</li>
<li class='itemize'>load extensions in the correct order</li>
</ul>
</li>
<li class='itemize'>2018/04/09
<ul class='itemize2'>
<li class='itemize'>released version <span class='rm-lmtt-10'>0.2</span></li>
<li class='itemize'>disabled default loading of <span class='rm-lmtt-10'>common_domfilters</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/04/06
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>Make:enable_extension</span> and <span class='rm-lmtt-10'>Make:disable_extension</span> functions</li>
<li class='itemize'>documented the configuration file</li>
</ul>
</li>
<li class='itemize'>2018/03/09
<ul class='itemize2'>
<li class='itemize'>load the configuration file before extensions</li>
</ul>
</li>
<li class='itemize'>2018/03/02
<ul class='itemize2'>
<li class='itemize'>Aeneas execution works</li>
<li class='itemize'>Aeneas documentation</li>
<li class='itemize'>added support for <span class='rm-lmtt-10'>.make4ht</span> configuration file</li>
</ul>
</li>
<li class='itemize'>2018/02/28
<ul class='itemize2'>
<li class='itemize'>Aeneas configuration file creation works</li>
</ul>
</li>
<li class='itemize'>2018/02/22
<ul class='itemize2'>
<li class='itemize'>fixed bug in <span class='rm-lmtt-10'>fixinlines</span> DOM filter</li>
</ul>
</li>
<li class='itemize'>2018/02/21
<ul class='itemize2'>
<li class='itemize'>added Aeneas domfilter</li>
<li class='itemize'>fixed bugs in <span class='rm-lmtt-10'>joincharacters</span> DOM filter</li>
</ul>
</li>
<li class='itemize'>2018/02/20
<ul class='itemize2'>
<li class='itemize'>fixed bug in <span class='rm-lmtt-10'>joincharacters</span> DOM filter</li>
<li class='itemize'>make <span class='rm-lmtt-10'>woff</span> default font format for <span class='rm-lmtt-10'>mathjaxnode</span></li>
<li class='itemize'>added documentation for <span class='rm-lmtt-10'>mathjaxnode</span> settings</li>
</ul>
</li>
<li class='itemize'>2018/02/19
<ul class='itemize2'>
<li class='itemize'>fixed bug in filter loading</li>
<li class='itemize'>added <span class='rm-lmtt-10'>mathjaxnode</span> extension</li>
</ul>
</li>
<li class='itemize'>2018/02/15
<ul class='itemize2'>
<li class='itemize'>use HTML5 as a default format</li>
<li class='itemize'>use <span class='rm-lmtt-10'>common_domfilters</span> implicitly for the XHTML and HTML5 formats</li>
</ul>
</li>
<li class='itemize'>2018/02/12
<ul class='itemize2'>
<li class='itemize'>added <span class='rm-lmtt-10'>common_domfilters</span> extension</li>
<li class='itemize'>documented DOM filters</li>
</ul>
</li>
<li class='itemize'>2018/02/12
<ul class='itemize2'>
<li class='itemize'>handle XML parsing errors in the DOM handler</li>
<li class='itemize'>enable extension loading in Formatters</li>
</ul>
</li>
<li class='itemize'>2018/02/11
<ul class='itemize2'>
<li class='itemize'>fixed Tidy extension output to support LuaXML</li>
<li class='itemize'>fixed white space issues with <span class='rm-lmtt-10'>joincharacters</span> DOM filter</li>
</ul>
</li>
<li class='itemize'>2018/02/09
<ul class='itemize2'>
<li class='itemize'>fixed issues with the Mathjax filter</li>
<li class='itemize'>documented basic info about thd DOM filters</li>
<li class='itemize'>DOM filter optimalizations</li>
</ul>
</li>
<li class='itemize'>2018/02/08
<ul class='itemize2'>
<li class='itemize'>make Tidy extension configurable</li>
<li class='itemize'>documented filter settings</li>
</ul>
</li>
<li class='itemize'>2018/02/07
<ul class='itemize2'>
<li class='itemize'>added filter for Mathjax-node</li>
</ul>
</li>
<li class='itemize'>2018/02/06
<ul class='itemize2'>
<li class='itemize'>created DOM filter function</li>
<li class='itemize'>added DOM filter for spurious inlinine elements</li>
</ul>
</li>
<li class='itemize'>2018/02/03
<ul class='itemize2'>
<li class='itemize'>added settings handling functions</li>
<li class='itemize'>settings made available for extensions and filters</li>
</ul>
</li>
<li class='itemize'>2017/12/08
<ul class='itemize2'>
<li class='itemize'>fixed the <span class='rm-lmtt-10'>mk4</span> build file loading when it is placed in the current working dir and another one with same filename somewhere in the TEXMF tree.</li>
</ul>
</li>
<li class='itemize'>2017/11/10
<ul class='itemize2'>
<li class='itemize'>Added new filter: <span class='rm-lmtt-10'>svg-height</span>. It tries to fix height of some of the images produced by <span class='rm-lmtt-10'>dvisvgm</span></li>
</ul>
</li>
<li class='itemize'>2017/10/06
<ul class='itemize2'>
<li class='itemize'>Added support for output format selection. Supported formats are <span class='rm-lmtt-10'>xhtml</span>, <span class='rm-lmtt-10'>html5</span> and <span class='rm-lmtt-10'>odt</span></li>
<li class='itemize'>Added support for extensions</li>
</ul>
</li>
<li class='itemize'>2017/09/10
<ul class='itemize2'>
<li class='itemize'>Added support for Latexmk</li>
<li class='itemize'>Added support of <span class='rm-lmtt-10'>math</span> library and <span class='rm-lmtt-10'>tonumber</span> function in the build files</li>
</ul>
</li>
<li class='itemize'>2017/09/04
<ul class='itemize2'>
<li class='itemize'>fixed bug caused by the previous change – the –help and –version didn’t work</li>
</ul>
</li>
<li class='itemize'>2017/08/22
<ul class='itemize2'>
<li class='itemize'>fixed the command line option parsing for <span class='rm-lmtt-10'>tex4ht</span>, <span class='rm-lmtt-10'>t4ht</span> and <span class='rm-lmtt-10'>latex</span> commands</li>
<li class='itemize'>various grammar and factual fixes in the documentation</li>
</ul>
</li>
<li class='itemize'>2017/04/26
<ul class='itemize2'>
<li class='itemize'>Released version <span class='rm-lmtt-10'>v0.1c</span></li>
</ul>
</li>
<li class='itemize'>2017/03/16
<ul class='itemize2'>
<li class='itemize'>check for <span class='rm-lmtt-10'>TeX capacity exceeded</span> error in the <span class='LATEX'>L<span class='A'>A</span><span class='TEX'>T<span class='E'>E</span>X</span></span> run.</li>
</ul>
</li>
<li class='itemize'>2016/12/19
<ul class='itemize2'>
<li class='itemize'>use full input name in <span class='rm-lmtt-10'>tex_file</span> variable. This should enable use of files without <span class='rm-lmtt-10'>.tex</span> extension.</li>
</ul>
</li>
<li class='itemize'>2016/10/22
<ul class='itemize2'>
<li class='itemize'>new command available in the build file: <span class='rm-lmtt-10'>Make:add_file(filename)</span>. This enables filters and commands to register files to the output.</li>
<li class='itemize'>use ipairs instead of pairs for traversing files and executing filters. This should ensure correct order of executions.</li>
</ul>
</li>
<li class='itemize'>2016/10/18
<ul class='itemize2'>
<li class='itemize'>new filter: replace colons in <span class='rm-lmtt-10'>id</span> and <span class='rm-lmtt-10'>href</span> attributes with underscores</li>
</ul>
</li>
<li class='itemize'>2016/01/11
<ul class='itemize2'>
<li class='itemize'>fixed bug in loading documents with full path specified</li>
</ul>
</li>
<li class='itemize'>2015/12/06 version 0.1b
<ul class='itemize2'>
<li class='itemize'>modifed lapp library to recognize <span class='rm-lmtt-10'>--version</span> and</li>
<li class='itemize'>added <span class='rm-lmtt-10'>--help</span> and <span class='rm-lmtt-10'>--version</span> command line options</li>
</ul>
</li>
<li class='itemize'>2015/11/30
<ul class='itemize2'>
<li class='itemize'>use <span class='rm-lmtt-10'>kpse</span> library for build file locating</li>
</ul>
</li>
<li class='itemize'>2015/11/17
<ul class='itemize2'>
<li class='itemize'>better <span class='rm-lmtt-10'>-jobname</span> handling</li>
</ul>
</li>
<li class='itemize'>2015/09/23 version 0.1a
<ul class='itemize2'>
<li class='itemize'>various documentation updates</li>
<li class='itemize'><span class='rm-lmtt-10'>mozhtf</span> profile for unicode output is used, this should prevent ligatures in the output files</li>
</ul>
</li>
<li class='itemize'>2015/06/29 version 0.1
<ul class='itemize2'>
<li class='itemize'>major README file update</li>
</ul>
</li>
<li class='itemize'>2015/06/26
<ul class='itemize2'>
<li class='itemize'>added Makefile</li>
<li class='itemize'>moved INSTALL instructions from README to INSTALL</li>
</ul>
</li>
</ul>
</body>
</html>